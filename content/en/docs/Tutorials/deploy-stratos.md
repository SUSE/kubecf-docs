---
title: "Deploy Stratos next to KubeCF"
date: 2020-02-07
weight: 4
description: >
  Deploy Stratos - Web-based Console UI for Cloud Foundry - next to KubeCF
---

## Required details

* External Kubernetes IP
* UAA endpoint url
* CF admin username and password
* CF API url

### Prepare Stratos setup config

Replace `<EXTERNAL_IP>` by the external ip[s] of your cluster,  adapt the port if required and store everything in a file, for example `stratos.yml`.

```yaml
console:
  service:
    externalIPs: ["<EXTERNAL_IP>"]
    servicePort: 8443
```

### Deploy Stratos

Add the SUSE Kubernetes charts repo and deploy Stratos. Instead of the SUSE repo the Stratos chart can also be referenced from https://github.com/cloudfoundry/stratos/releases.
```shell
helm repo add suse https://kubernetes-charts.suse.com/
helm install --namespace stratos --name stratos --values ./stratos.yml suse/console
```

## Initial setup of Stratos

As soon as Stratos is deployed connect to https://<EXTERNAL_IP>:<SERIVCE_PORT> and follow the steps.

Provide your UAA Endpoint url, for example: https://uaa.<YOUR_CF_DOMAIN> (Make sure that there is no leading Slash at the end, otherwise UAA will ignore the authentication request.)

The client id is `cf` and the client secret stays empty.

The admin username is `admin` and password is the Cloudfoundry admin password. If you do not know the admin password yet, because for example it was autogenerated during the initial deployment of kubecf, it can be extracted with this command:
```shell
echo $(kubectl get secrets -n kubecf kubecf.var-cf-admin-password -o json | jq -r .data.password | base64 -d)
```

The next step defines which uaa group specifies Stratos admins and does not need to be changed.

After the initial setup Cloudfoundry can be added with the api endpoint url and the same cloudfoundry admin credentials.
