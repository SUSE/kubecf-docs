<!doctype html>
<html lang="en" class="no-js">
  <head>
    <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="generator" content="Hugo 0.57.2" />

<META NAME="ROBOTS" CONTENT="INDEX, FOLLOW">



<link rel="shortcut icon" href="/favicons/favicon.ico" >
<link rel="apple-touch-icon" href="/favicons/apple-touch-icon-180x180.png" sizes="180x180">
<link rel="icon" type="image/png" href="/favicons/favicon-16x16.png" sizes="16x16">
<link rel="icon" type="image/png" href="/favicons/favicon-32x32.png" sizes="32x32">
<link rel="icon" type="image/png" href="/favicons/android-36x36.png" sizes="36x36">
<link rel="icon" type="image/png" href="/favicons/android-48x48.png" sizes="48x48">
<link rel="icon" type="image/png" href="/favicons/android-72x72.png" sizes="72x72">
<link rel="icon" type="image/png" href="/favicons/android-96x96.png" sizes="96x96">
<link rel="icon" type="image/png" href="/favicons/android-144x144.png" sizes="144x144">
<link rel="icon" type="image/png" href="/favicons/android-192x192.png" sizes="192x192">

<title>Deploy KubeCF in Minikube | KubeCF</title><meta property="og:title" content="Deploy KubeCF in Minikube" />
<meta property="og:description" content="Deploy a git KubeCF checkout in Minikube with Bazel.
" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://kubecf.suse.dev/docs/tutorials/deploy-minikube/" />
<meta property="article:published_time" content="2017-01-05T00:00:00+00:00" />
<meta property="article:modified_time" content="2019-12-19T16:16:16+01:00" /><meta property="og:site_name" content="KubeCF" />
<meta itemprop="name" content="Deploy KubeCF in Minikube">
<meta itemprop="description" content="Deploy a git KubeCF checkout in Minikube with Bazel.
">


<meta itemprop="datePublished" content="2017-01-05T00:00:00&#43;00:00" />
<meta itemprop="dateModified" content="2019-12-19T16:16:16&#43;01:00" />
<meta itemprop="wordCount" content="623">



<meta itemprop="keywords" content="" />
<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Deploy KubeCF in Minikube"/>
<meta name="twitter:description" content="Deploy a git KubeCF checkout in Minikube with Bazel.
"/>







<link rel="preload" href="/scss/main.min.de2e3299cd7d4088947e25e9ed887d91ebd756863ab68fb4e3bfec6a311f6c3d.css" as="style">
<link href="/scss/main.min.de2e3299cd7d4088947e25e9ed887d91ebd756863ab68fb4e3bfec6a311f6c3d.css" rel="stylesheet" integrity="">


<link href="/css/offline-search.css" rel="stylesheet">

<script
  src="https://code.jquery.com/jquery-3.3.1.min.js"
  integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8="
  crossorigin="anonymous"></script>

<script src="https://unpkg.com/lunr@2.1.6/lunr.js"></script>
<script src="/js/offline-search.js"></script>


    <title>Deploy KubeCF in Minikube | KubeCF</title>
  </head>
  <body class="td-page">
    <header>
      
<nav class="js-navbar-scroll navbar navbar-expand navbar-dark flex-column flex-md-row td-navbar">
        <a class="navbar-brand" href="/">
		<span class="navbar-logo"><svg id="svg" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="400" height="82.56100291023058" viewBox="0  0, 400,82.56100291023058"><g id="svgg"><path id="path0" d="M301.878 23.672C293.68 24.534 287.458 30.82 286.665 39.042 285.967 46.268 289.695 52.898 296.283 56.152 297.491 56.748 298.287 56.997 301.127 57.666 305.452 58.684 311.877 56.64 315.593 53.062 317.278 51.44 318.419 50.622 320.333 49.663 324.204 47.725 323.251 47.768 364.292 47.669L365.167 47.667v-7-7L364.292 33.665C327.823 33.575 325.744 33.528 322.833 32.712 320.615 32.09 317.91 30.495 316 28.685 312.448 25.317 307.194 23.175 303.333 23.523 303.196 23.535 302.541 23.602 301.878 23.672" stroke="none" fill="#1298d1" fill-rule="evenodd"/><path id="path1" d="M379.5 30v3.5L371.375 33.532C366.906 33.549 363.681 33.59 364.208 33.623L365.167 33.683V40.667 47.65L364.208 47.71C363.681 47.743 366.906 47.784 371.375 47.802L379.5 47.833v3.5C379.5 53.258 379.558 54.833 379.63 54.833 379.787 54.833 380.52 54.354 380.75 54.101 380.842 53.999 381.217 53.693 381.583 53.419 381.95 53.146 382.363 52.831 382.5 52.719 383.78 51.679 385.038 50.677 385.498 50.333 385.804 50.104 386.399 49.635 386.819 49.291 387.239 48.948 388.296 48.103 389.167 47.415 391.743 45.378 392.302 44.933 394.741 42.987 396.019 41.966 397.163 41.094 397.283 41.048 397.752 40.868 397.422 40.492 395.402 38.901 394.249 37.993 393.132 37.1 392.921 36.917 392.71 36.733 392.098 36.239 391.56 35.818 391.023 35.397 388.896 33.716 386.833 32.083 384.771 30.451 382.645 28.77 382.109 28.349 381.573 27.928 380.834 27.34 380.468 27.042 379.485 26.243 379.5 26.198 379.5 30m-32.363 3.625C349.549 33.651 353.449 33.651 355.803 33.625 358.157 33.599 356.183 33.577 351.417 33.578 346.65 33.578 344.724 33.599 347.137 33.625M347.137 47.792C349.549 47.818 353.449 47.818 355.803 47.792 358.157 47.765 356.183 47.744 351.417 47.744 346.65 47.744 344.724 47.766 347.137 47.792" stroke="none" fill="#2c74bc" fill-rule="evenodd"/><path id="path2" d="M305.892.457C304.291 6.836 294.127 8.203 290.495 2.528L290.247 2.14 289.332 2.491C287.912 3.036 284.06 4.888 283 5.535 282.2 6.023 280.114 7.373 279.947 7.511 279.872 7.572 280.004 8.083 280.241 8.645 282.862 14.873 276.072 22.251 269.769 20.023 268.757 19.665 268.5 19.679 268.5 20.093 268.5 20.225 268.441 20.333 268.368 20.333 268.296 20.333 267.764 21.327 267.186 22.542 266.608 23.756 266.059 24.893 265.967 25.067 265.768 25.442 264.417 29.39 264.271 30.024 264.176 30.434 264.253 30.506 265.41 31.085 272.23 34.501 271.509 44.817 264.292 47.092 263.176 47.444 263.206 47.3 263.759 49.721 264.597 53.385 266.527 58.619 267.014 58.549 267.144 58.531 267.773 58.362 268.413 58.174 274.258 56.46 280.003 61.023 279.625 67.08 279.529 68.619 278.777 70.673 277.975 71.586 277.32 72.333 277.328 72.351 278.875 73.488 279.631 74.044 280.4 74.618 280.583 74.763 281.235 75.279 284.771 77.313 286.083 77.927 286.817 78.269 287.47 78.579 287.536 78.615 287.602 78.65 287.885 78.225 288.165 77.669 291.165 71.728 299.444 71.219 303.125 76.75 303.918 77.942 304.667 80.108 304.667 81.209V82L305.458 82.001C308.045 82.005 316.43 80.392 316.411 79.894 316.408 79.815 316.303 79.188 316.178 78.5 315.089 72.527 321.002 67.062 326.812 68.672 328.591 69.165 330.531 70.285 331.05 71.119 331.474 71.801 334.598 68.621 337.473 64.583 339.349 61.947 339.449 62.32 336.445 60.763 335.513 60.281 333.325 59.149 331.583 58.249 329.842 57.348 327.742 56.244 326.917 55.796 325.406 54.975 323.97 54.292 323.923 54.373 323.909 54.397 323.641 54.754 323.328 55.167 314.17 67.227 296.824 68.249 286.448 57.339 285.039 55.857 284.767 55.509 283.528 53.604 280.914 49.586 279.75 45.228 279.895 40 279.989 36.623 280.161 35.663 281.25 32.417 281.698 31.084 283.702 27.235 284.157 26.833 284.209 26.787 284.473 26.45 284.744 26.083 290.721 17.986 302.002 14.537 311.665 17.853 313.964 18.641 317.467 20.426 318.167 21.164 318.212 21.212 318.55 21.476 318.917 21.749 319.965 22.532 321.707 24.236 322.514 25.268 322.919 25.786 323.4 26.392 323.583 26.614L323.917 27.019 324.667 26.663C325.079 26.467 326.092 25.956 326.917 25.526 327.742 25.096 329.826 24.01 331.549 23.113 333.272 22.217 335.372 21.106 336.215 20.646 337.059 20.185 337.998 19.704 338.3 19.576 338.963 19.295 338.977 19.331 337.292 16.977 335.419 14.359 331.899 10.5 331.384 10.5 331.269 10.5 330.651 10.755 330.01 11.067 326.267 12.889 322.076 11.822 319.24 8.327 318.369 7.253 317.421 4.234 317.529 2.876L317.586 2.163 316.001 1.675C311.11.17 306.115-.431 305.892.457M0 40.667v40.5H8.667 17.333V68.744 56.322L18.792 54.611C19.594 53.669 20.962 52.027 21.833 50.962 22.704 49.896 23.466 49.018 23.527 49.012 23.619 49.002 26.201 52.314 27.417 54.001 27.6 54.255 28.425 55.344 29.25 56.419 30.075 57.495 30.9 58.583 31.083 58.837 31.267 59.09 32.317 60.481 33.417 61.927 37.813 67.706 39.104 69.415 39.564 70.068 39.828 70.443 40.092 70.787 40.15 70.833 40.208 70.879 41.039 71.967 41.996 73.25 42.952 74.533 43.776 75.621 43.826 75.667 43.998 75.825 47.418 80.362 47.667 80.764L47.917 81.166H58.625C64.515 81.167 69.333 81.119 69.333 81.061 69.333 80.952 67.754 78.94 65.49 76.167 65.228 75.846 64.448 74.871 63.756 74 63.063 73.129 62.179 72.017 61.79 71.528 61.401 71.039 60.918 70.439 60.715 70.195 60.389 69.801 57.812 66.579 55.761 64 55.36 63.496 54.893 62.921 54.724 62.723 54.213 62.124 50.774 57.831 50.417 57.345 50.001 56.78 47.623 53.78 47.501 53.667 47.372 53.547 46.652 52.651 46.167 52.006 45.938 51.701 44.887 50.385 43.833 49.08 42.779 47.775 41.692 46.42 41.417 46.07 41.142 45.719 40.654 45.118 40.333 44.733 40.012 44.348 39.15 43.266 38.417 42.328 36.993 40.508 36.015 39.304 35.491 38.727 35.056 38.248 35.037 38.301 36.125 37.026 36.652 36.408 37.421 35.498 37.833 35.003 38.246 34.509 39.096 33.499 39.722 32.76 40.348 32.021 41.145 31.079 41.492 30.667 41.84 30.254 42.865 29.049 43.77 27.989 44.676 26.93 45.754 25.659 46.167 25.166 46.914 24.274 47.803 23.219 48.642 22.229 48.885 21.943 49.383 21.349 49.75 20.91 50.117 20.471 52.029 18.222 54 15.913 55.971 13.604 57.883 11.354 58.25 10.913 58.617 10.472 60.267 8.523 61.917 6.582 63.567 4.642 65.217 2.693 65.583 2.253 65.95 1.813 66.456 1.222 66.708.939 66.96.657 67.167.367 67.167.296 67.167.059 45.714.138 45.621.375 45.548.56 42.38 4.603 41.481 5.657 41.291 5.881 40.935 6.33 40.692 6.654 40.449 6.978 40.124 7.395 39.97 7.58 39.653 7.961 37.057 11.233 34.083 15.001 32.983 16.394 32.007 17.621 31.914 17.726 31.821 17.831 31.484 18.254 31.164 18.666 30.845 19.078 30.492 19.528 30.38 19.666 30.269 19.804 29.795 20.404 29.327 21 28.466 22.097 27.825 22.898 26.917 24.013 26.642 24.35 25.554 25.731 24.5 27.082 23.446 28.433 22.321 29.853 22 30.239 21.679 30.624 21.229 31.19 21 31.496 20.409 32.285 19.083 33.954 18.362 34.814 18.026 35.217 17.659 35.704 17.548 35.898 17.388 36.176 17.344 32.445 17.339 18.208L17.333.167H8.667.0v40.5m133.5.0v40.5H141.333 149.167V77.579 73.99L150.792 75.631C151.685 76.533 152.717 77.487 153.083 77.752 153.45 78.016 153.787 78.274 153.833 78.325 154.068 78.586 155.947 79.72 157.103 80.298 163.109 83.303 171.618 83.293 178 80.274 179.469 79.579 180.124 79.197 182.009 77.937 183.325 77.058 186.56 73.696 187.437 72.296 187.682 71.904 187.936 71.546 188.001 71.5 188.148 71.396 189.226 69.482 189.644 68.583 190.441 66.865 190.667 66.291 191.229 64.555 193.713 56.885 193.715 46.996 191.234 39.278 190.653 37.472 188.271 32.333 188.014 32.333 187.944 32.333 187.809 32.162 187.713 31.953 186.003 28.199 179.309 23.308 173.973 21.912 169.374 20.709 161.494 20.936 159.417 22.331 159.325 22.392 158.875 22.579 158.417 22.746 156.94 23.283 153.778 25.136 152.727 26.08 151.763 26.945 150.302 28.384 149.793 28.968L149.167 29.687V14.927.167H141.333 133.5v40.5M342.667 16.833V33.5H351.333 360v-9-9h20 20V7.833.167H371.333 342.667V16.833M221.667 21.416C219.1 21.795 217.889 22.045 217.25 22.328 217.067 22.41 216.395 22.642 215.758 22.846 213.639 23.523 210.341 25.204 208.651 26.468 206.677 27.945 206.096 28.453 204.667 29.955 202.777 31.939 202.172 32.681 201.172 34.244 200.756 34.893 200.32 35.572 200.203 35.754 197.132 40.487 195.231 50.6 196.319 56.417 196.439 57.058 196.681 58.34 196.857 59.265 199.173 71.436 209.116 80.422 222.308 82.264 224.689 82.597 232.072 82.498 234.25 82.104 238.758 81.29 243.599 79.737 246.07 78.313 246.246 78.211 246.696 77.957 247.07 77.748 248.686 76.845 251.29 74.899 251.416 74.501 251.483 74.292 251.273 73.837 250.788 73.136 249.287 70.966 247.056 67.693 245.949 66.038L244.804 64.327 244.426 64.622C240.618 67.588 237.103 69.119 232.25 69.927 222.937 71.476 214.255 66.237 212.622 58.083L212.389 56.917 234.111 56.874 255.833 56.832 255.832 54.041C255.821 32.185 241.478 18.489 221.667 21.416M69 43.792C69 67.222 69.118 70.077 70.162 71.963 70.249 72.121 70.497 72.7 70.713 73.25 72.454 77.686 76.333 80.625 82.417 82.117 83.786 82.453 89.956 82.602 91.927 82.347 97.861 81.579 103.791 78.722 107.72 74.737L108.5 73.945V77.556 81.167h7.75H124V51.833 22.5h-7.75-7.75V42.354 62.207L107.208 63.491C100.022 70.631 87.955 70.529 85.407 63.306 84.499 60.731 84.5 60.766 84.5 40.899V22.5H76.75 69V43.792m161.475-9.881C235.918 35.198 240.667 40.685 240.667 45.688V46.167H226.409 212.152L212.257 45.542C213.729 36.846 221.609 31.816 230.475 33.911M165.388 35.239C169.703 36.065 173.738 39.422 175.418 43.583 175.566 43.95 175.79 44.476 175.916 44.751 177.916 49.145 177.029 58.17 174.174 62.469 169.001 70.257 157.415 70.827 150.342 63.641L149.167 62.447V51.989 41.531L149.901 40.64C150.306 40.151 150.912 39.525 151.25 39.25 151.587 38.975 152.1 38.554 152.39 38.316 155.485 35.763 161.135 34.425 165.388 35.239M342.667 64.5V81.167H351.333 360V64.5 47.833H351.333 342.667V64.5" stroke="none" fill="#040404" fill-rule="evenodd"/><path id="path3" stroke="none" fill="#042434" fill-rule="evenodd"/><path id="path4" stroke="none" fill="#181040" fill-rule="evenodd"/></g></svg></span><span class="text-uppercase font-weight-bold">KubeCF</span>
	</a>
	<div class="td-navbar-nav-scroll ml-md-auto" id="main_navbar">
		<ul class="navbar-nav mt-2 mt-lg-0">
			
			
			<li class="nav-item mr-4 mb-2 mb-lg-0">
				
				
				
				
				
				
				<a class="nav-link active" href="/docs/" ><span class="active">Documentation</span></a>
			</li>
			
			<li class="nav-item mr-4 mb-2 mb-lg-0">
				
				
				
				
				
				
				<a class="nav-link" href="/community/" ><span>Community</span></a>
			</li>
			
			
			
		</ul>
	</div>
	<div class="navbar-nav d-none d-lg-block">
<div id="search-nav-container">
<input type="search" id="search-input" autocomplete="off" class="form-control td-search-input" placeholder="&#xf002 Search this site…" autocomplete="on">
<div id="search-results" class="container"></div>
</div>
</div>
</nav>

    </header>
    <div class="container-fluid td-outer">
      <div class="td-main">
        <div class="row flex-xl-nowrap">
          <div class="col-12 col-md-3 col-xl-2 td-sidebar d-print-none">
            




<div id="td-sidebar-menu" class="td-sidebar__inner">
  
  <form class="td-sidebar__search d-flex align-items-center">
    
<div id="search-nav-container">
<input type="search" id="search-input" autocomplete="off" class="form-control td-search-input" placeholder="&#xf002 Search this site…" autocomplete="on">
<div id="search-results" class="container"></div>
</div>

    <button class="btn btn-link td-sidebar__toggle d-md-none p-0 ml-3 fas fa-bars" type="button" data-toggle="collapse" data-target="#td-section-nav" aria-controls="td-docs-nav" aria-expanded="false" aria-label="Toggle section navigation">
    </button>
  </form>
  
  <nav class="collapse td-sidebar-nav pt-2 pl-4" id="td-section-nav">
    
    






<ul class="td-sidebar-nav__section pr-md-3">
  <li class="td-sidebar-nav__section-title">
    <a  href="/docs/" class="align-left pl-0 pr-2 td-sidebar-link td-sidebar-link__section">Documentation</a>
  </li>
  <ul>
    <li class="collapse show" id="docs">
      
      
      
      
      






<ul class="td-sidebar-nav__section pr-md-3">
  <li class="td-sidebar-nav__section-title">
    <a  href="/docs/overview/" class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">Overview</a>
  </li>
  <ul>
    <li class="collapse " id="docs-overview">
      
      
      
    </li>
  </ul>
</ul>

      
      
      
      






<ul class="td-sidebar-nav__section pr-md-3">
  <li class="td-sidebar-nav__section-title">
    <a  href="/docs/deployment/" class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">Deploying KubeCF</a>
  </li>
  <ul>
    <li class="collapse " id="docs-deployment">
      
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-docs-deployment-kubernetes-deploy" href="/docs/deployment/kubernetes-deploy/">Deployment Walkthrough</a>
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-docs-deployment-affinities-and-tolerations" href="/docs/deployment/affinities-and-tolerations/">Affinities and Tolerations</a>
      
      
    </li>
  </ul>
</ul>

      
      
      
      






<ul class="td-sidebar-nav__section pr-md-3">
  <li class="td-sidebar-nav__section-title">
    <a  href="/docs/concepts/" class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">Concepts</a>
  </li>
  <ul>
    <li class="collapse " id="docs-concepts">
      
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-docs-concepts-operator" href="/docs/concepts/operator/">Operator</a>
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-docs-concepts-quarks" href="/docs/concepts/quarks/">Quarks</a>
      
      
    </li>
  </ul>
</ul>

      
      
      
      






<ul class="td-sidebar-nav__section pr-md-3">
  <li class="td-sidebar-nav__section-title">
    <a  href="/docs/tasks/" class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">Core Tasks</a>
  </li>
  <ul>
    <li class="collapse " id="docs-tasks">
      
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-docs-tasks-upgrade" href="/docs/tasks/upgrade/">KubeCF Upgrades</a>
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-docs-tasks-deploy" href="/docs/tasks/deploy/">KubeCF Deployment guidelines</a>
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-docs-tasks-secrets" href="/docs/tasks/secrets/">KubeCF and Secrets</a>
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-docs-tasks-bosh" href="/docs/tasks/bosh/">Test BOSH Releases</a>
      
      
    </li>
  </ul>
</ul>

      
      
      
      






<ul class="td-sidebar-nav__section pr-md-3">
  <li class="td-sidebar-nav__section-title">
    <a  href="/docs/tutorials/" class="align-left pl-0 pr-2 active td-sidebar-link td-sidebar-link__section">Tutorials</a>
  </li>
  <ul>
    <li class="collapse show" id="docs-tutorials">
      
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-docs-tutorials-deploy-kind" href="/docs/tutorials/deploy-kind/">Deploy KubeCF on Kind</a>
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-docs-tutorials-eirini-persi" href="/docs/tutorials/eirini_persi/">Eirini Persistence broker</a>
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-docs-tutorials-deploy-stratos" href="/docs/tutorials/deploy-stratos/">Deploy Stratos next to KubeCF</a>
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-docs-tutorials-bosh-integration" href="/docs/tutorials/bosh-integration/">Bosh releases integration</a>
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page  active" id="m-docs-tutorials-deploy-minikube" href="/docs/tutorials/deploy-minikube/">Deploy KubeCF in Minikube</a>
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-docs-tutorials-run-smoke-tests" href="/docs/tutorials/run-smoke-tests/">Run smoke tests</a>
      
      
    </li>
  </ul>
</ul>

      
      
      
      






<ul class="td-sidebar-nav__section pr-md-3">
  <li class="td-sidebar-nav__section-title">
    <a  href="/docs/reference/" class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">Reference</a>
  </li>
  <ul>
    <li class="collapse " id="docs-reference">
      
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-docs-reference-tests" href="/docs/reference/tests/">Tests</a>
      
      
    </li>
  </ul>
</ul>

      
      
      
      






<ul class="td-sidebar-nav__section pr-md-3">
  <li class="td-sidebar-nav__section-title">
    <a  href="/docs/contribution-guidelines/" class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">Contribution Guidelines</a>
  </li>
  <ul>
    <li class="collapse " id="docs-contribution-guidelines">
      
      
      
    </li>
  </ul>
</ul>

      
      
    </li>
  </ul>
</ul>

  </nav>
</div>




          </div>
          <div class="d-none d-xl-block col-xl-2 td-toc d-print-none">
            




<div class="td-page-meta ml-2 pb-1 pt-2 mb-0">





<a href="https://github.com/cloudfoundry-incubator/kubecf-docs/edit/master/content/en/docs/Tutorials/deploy-minikube.md" target="_blank"><i class="fa fa-edit fa-fw"></i> Edit this page</a>
<a href="https://github.com/cloudfoundry-incubator/kubecf-docs/issues/new?title=Deploy%20KubeCF%20in%20Minikube" target="_blank"><i class="fab fa-github fa-fw"></i> Create documentation issue</a>


<a href="https://github.com/cloudfoundry-incubator/kubecf/issues/new" target="_blank"><i class="fas fa-tasks fa-fw"></i> Create project issue</a>

</div>






<nav id="TableOfContents">
<ul>
<li>
<ul>
<li><a href="#minikube">Minikube</a>
<ul>
<li><a href="#attention-dangers">Attention, Dangers</a></li>
<li><a href="#advanced-configuration">Advanced configuration</a></li>
</ul></li>
<li><a href="#cf-operator">cf-operator</a>
<ul>
<li><a href="#deployment-and-tear-down">Deployment and Tear-down</a></li>
</ul></li>
<li><a href="#kubecf">Kubecf</a>
<ul>
<li><a href="#system-domain">System domain</a></li>
<li><a href="#deployment-and-tear-down-1">Deployment and Tear-down</a></li>
<li><a href="#access">Access</a></li>
<li><a href="#advanced-topics">Advanced Topics</a>
<ul>
<li><a href="#diego-vs-eirini">Diego vs Eirini</a></li>
<li><a href="#ingress">Ingress</a>
<ul>
<li><a href="#installation-of-the-nginx-ingress-controller">Installation of the NGINX Ingress Controller</a></li>
<li><a href="#configure-kubecf">Configure kubecf</a></li>
</ul></li>
</ul></li>
</ul></li>
</ul></li>
</ul>
</nav>



          </div>
          <main class="col-12 col-md-9 col-xl-8 pl-md-5" role="main">
            <nav aria-label="breadcrumb" class="d-none d-md-block d-print-none">
	<ol class="breadcrumb spb-1">
		










<li class="breadcrumb-item" >
	<a href="https://kubecf.suse.dev/docs/">Documentation</a>
</li>




<li class="breadcrumb-item" >
	<a href="https://kubecf.suse.dev/docs/tutorials/">Tutorials</a>
</li>




<li class="breadcrumb-item active" aria-current="page">
	<a href="https://kubecf.suse.dev/docs/tutorials/deploy-minikube/">Deploy KubeCF in Minikube</a>
</li>

	</ol>
</nav	>

            
<div class="td-content">
	<h1>Deploy KubeCF in Minikube</h1>
	<div class="lead">Deploy a git KubeCF checkout in Minikube with Bazel.</div>
	

<p>The intended audience of this document are developers wishing to
contribute to the Kubecf project.</p>

<p>Here we explain how to deploy Kubecf locally using:</p>

<ul>
<li>Minikube to manage a local Kubernetes cluster.</li>
<li>A cf-operator pinned with Bazel.</li>
<li>Kubecf built and deployed from the sources in the current checkout.</li>
</ul>

<h2 id="minikube">Minikube</h2>

<p>Minikube is one of several projects enabling the deployment,
management and tear-down of a local Kubernetes cluster.</p>

<p>The Kubecf Bazel workspace contains targets to deploy and/or tear-down
a Minikube-based cluster. Using these has the advantage of using a
specific version of Minikube. On the other side, the reduced
variability of the development environment is a disadvantage as well,
possibly allowing portability issues to slide through.</p>

<table>
<thead>
<tr>
<th>Operation</th>
<th>Command</th>
</tr>
</thead>

<tbody>
<tr>
<td>Deployment</td>
<td><code>bazel run //dev/minikube:start</code></td>
</tr>

<tr>
<td>Tear-down</td>
<td><code>bazel run //dev/minikube:delete</code></td>
</tr>
</tbody>
</table>

<h3 id="attention-dangers">Attention, Dangers</h3>

<p>Minikube edits the Kubernetes configuration file referenced by the
environment variable <code>KUBECONFIG</code>, or <code>~/.kube/config</code>.</p>

<p>To preserve the original configuration either make a backup of the
relevant file, or change <code>KUBECONFIG</code> to a different path specific to
the intended deployment.</p>

<h3 id="advanced-configuration">Advanced configuration</h3>

<p>The local <a href="../kube/minikube.md">Minikube Documentation</a> explains the
various environment variables which can be used to configure the
resources used by the cluster (CPUs, memory, disk size, etc.) in
detail.</p>

<h2 id="cf-operator">cf-operator</h2>

<p>The <a href="https://github.com/cloudfoundry-incubator/cf-operator" target="_blank">cf-operator</a> is the underlying generic tool to deploy a (modified)
BOSH deployment like Kubecf for use.</p>

<p>It has to be installed in the same kube cluster Kubecf will be deployed to.</p>

<h3 id="deployment-and-tear-down">Deployment and Tear-down</h3>

<p>The Kubecf Bazel workspace contains targets to deploy and/or tear-down
cf-operator:</p>

<table>
<thead>
<tr>
<th>Operation</th>
<th>Command</th>
</tr>
</thead>

<tbody>
<tr>
<td>Deployment</td>
<td><code>bazel run //dev/cf_operator:apply</code></td>
</tr>

<tr>
<td>Tear-down</td>
<td><code>bazel run //dev/cf_operator:delete</code></td>
</tr>
</tbody>
</table>

<h2 id="kubecf">Kubecf</h2>

<p>With all the prequisites handled by the preceding sections it is now
possible to build and deploy kubecf itself.</p>

<h3 id="system-domain">System domain</h3>

<p>The main configuration to set for kubecf is its system domain.
For the Minikube foundation we have to specify it as:</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-sh" data-lang="sh"><span style="color:#204a87">echo</span> <span style="color:#4e9a06">&#34;system_domain: </span><span style="color:#204a87;font-weight:bold">$(</span>minikube ip<span style="color:#204a87;font-weight:bold">)</span><span style="color:#4e9a06">.xip.io&#34;</span> <span style="color:#4e9a06">\
</span><span style="color:#4e9a06"></span>  &gt; <span style="color:#4e9a06">&#34;</span><span style="color:#204a87;font-weight:bold">$(</span>bazel info workspace<span style="color:#204a87;font-weight:bold">)</span><span style="color:#4e9a06">/dev/kubecf/system_domain_values.yaml&#34;</span></code></pre></div>
<h3 id="deployment-and-tear-down-1">Deployment and Tear-down</h3>

<p>The Kubecf Bazel workspace contains targets to deploy and/or tear-down
kubecf from the sources:</p>

<table>
<thead>
<tr>
<th>Operation</th>
<th>Command</th>
</tr>
</thead>

<tbody>
<tr>
<td>Deployment</td>
<td><code>bazel run //dev/kubecf:apply</code></td>
</tr>

<tr>
<td>Tear-down</td>
<td><code>bazel run //dev/kubecf:delete</code></td>
</tr>
</tbody>
</table>

<p>In this default deployment kubecf is launched without Ingress, and
uses the Diego scheduler.</p>

<h3 id="access">Access</h3>

<p>Accessing the cluster from outside of the minikube VM requires
<a href="#ingress">ingress</a> to be set up correctly.</p>

<p>To access the cluster after the cf-operator has completed the
deployment and all pods are active invoke:</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-sh" data-lang="sh">cf api --skip-ssl-validation <span style="color:#4e9a06">&#34;https://api.</span><span style="color:#204a87;font-weight:bold">$(</span>minikube ip<span style="color:#204a87;font-weight:bold">)</span><span style="color:#4e9a06">.xip.io&#34;</span>

<span style="color:#8f5902;font-style:italic"># Copy the admin cluster password.</span>
<span style="color:#000">acp</span><span style="color:#ce5c00;font-weight:bold">=</span><span style="color:#204a87;font-weight:bold">$(</span>kubectl get secret <span style="color:#4e9a06">\
</span><span style="color:#4e9a06"></span>        --namespace kubecf kubecf.var-cf-admin-password <span style="color:#4e9a06">\
</span><span style="color:#4e9a06"></span>        -o <span style="color:#000">jsonpath</span><span style="color:#ce5c00;font-weight:bold">=</span><span style="color:#4e9a06">&#39;{.data.password}&#39;</span> <span style="color:#4e9a06">\
</span><span style="color:#4e9a06"></span>        <span style="color:#000;font-weight:bold">|</span> base64 --decode<span style="color:#204a87;font-weight:bold">)</span>

<span style="color:#8f5902;font-style:italic"># Use the password from the previous step when requested.</span>
cf auth admin <span style="color:#4e9a06">&#34;</span><span style="color:#4e9a06">${</span><span style="color:#000">acp</span><span style="color:#4e9a06">}</span><span style="color:#4e9a06">&#34;</span></code></pre></div>
<h3 id="advanced-topics">Advanced Topics</h3>

<h4 id="diego-vs-eirini">Diego vs Eirini</h4>

<p>Diego is the standard scheduler used by kubecf to deploy CF
applications. Eirini is an alternative to Diego that follows a more
Kubernetes native approach, deploying the CF apps directly to a
Kubernetes namespace.</p>

<p>To activate this alternative, add a file matching the pattern
<code>*values.yaml</code> to the directory <strong>dev/kubecf</strong> and containing</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml">features<span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span><span style="color:#f8f8f8;text-decoration:underline">  </span>eirini<span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span><span style="color:#f8f8f8;text-decoration:underline">    </span>enabled<span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#204a87;font-weight:bold">true</span></code></pre></div>
<p>before deploying kubecf.</p>

<h4 id="ingress">Ingress</h4>

<p>By default, the cluster is exposed through its Kubernetes services.</p>

<p>To use the NGINX ingress instead, it is necessary to:</p>

<ul>
<li>Install and configure the NGINX Ingress Controller.</li>
<li>Configure Kubecf to use the ingress controller.</li>
</ul>

<p>This has to happen before deploying kubecf.</p>

<h5 id="installation-of-the-nginx-ingress-controller">Installation of the NGINX Ingress Controller</h5>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-sh" data-lang="sh">helm install stable/nginx-ingress <span style="color:#4e9a06">\
</span><span style="color:#4e9a06"></span>  --name ingress <span style="color:#4e9a06">\
</span><span style="color:#4e9a06"></span>  --namespace ingress <span style="color:#4e9a06">\
</span><span style="color:#4e9a06"></span>  --set <span style="color:#4e9a06">&#34;tcp.2222=kubecf/kubecf-scheduler:2222&#34;</span> <span style="color:#4e9a06">\
</span><span style="color:#4e9a06"></span>  --set <span style="color:#4e9a06">&#34;tcp.&lt;services.tcp-router.port_range.start&gt;=kubecf/kubecf-tcp-router:&lt;services.tcp-router.port_range.start&gt;&#34;</span> <span style="color:#4e9a06">\
</span><span style="color:#4e9a06"></span>  ...
  --set <span style="color:#4e9a06">&#34;tcp.&lt;services.tcp-router.port_range.end&gt;=kubecf/kubecf-tcp-router:&lt;services.tcp-router.port_range.end&gt;&#34;</span> <span style="color:#4e9a06">\
</span><span style="color:#4e9a06"></span>  --set <span style="color:#4e9a06">&#34;controller.service.externalIPs={</span><span style="color:#204a87;font-weight:bold">$(</span>minikube ip<span style="color:#204a87;font-weight:bold">)</span><span style="color:#4e9a06">}&#34;</span></code></pre></div>
<p>The <code>tcp.&lt;port&gt;</code> option uses the NGINX TCP pass-through.</p>

<p>In the case of the <code>tcp-router</code> ports, one <code>--set</code> for each port is required, starting with
<code>services.tcp-router.port_range.start</code> and ending with <code>services.tcp-router.port_range.end</code>. Those
values are defined on the <code>values.yaml</code> file with default values.</p>

<p>The last flag in the command above assigns the external IP of the
cluster to the Ingress Controller service.</p>

<h5 id="configure-kubecf">Configure kubecf</h5>

<p>Place a file matching the pattern <code>*values.yaml</code> into the directory
<strong>dev/kubecf</strong> and containing</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml">features<span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span><span style="color:#f8f8f8;text-decoration:underline">  </span>ingress<span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span><span style="color:#f8f8f8;text-decoration:underline">    </span>enabled<span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#204a87;font-weight:bold">true</span></code></pre></div>
	
	
	<div class="text-muted mt-5 pt-3 border-top">Last modified December 19, 2019: <a  href="https://github.com/cloudfoundry-incubator/kubecf-docs/commit/4d8ebc6bf25a2a17f58e729d2a1bc05646c69031">Minor fixups (4d8ebc6)</a>
</div>
</div>


          </main>
        </div>
      </div>
      
<footer class="bg-dark py-5 row d-print-none">
  <div class="container-fluid mx-sm-5">
    <div class="row">
      <div class="col-6 col-sm-4 text-xs-center order-sm-2">
        
        
        
      </div>
      <div class="col-6 col-sm-4 text-right text-xs-center order-sm-3">
        
        
        
<ul class="list-inline mb-0">
  
  <li class="list-inline-item mx-2 h3" data-toggle="tooltip" data-placement="top" title="GitHub" aria-label="GitHub">
    <a class="text-white" target="_blank" href="https://github.com/cloudfoundry-incubator/kubecf">
      <i class="fab fa-github"></i>
    </a>
  </li>
  
  <li class="list-inline-item mx-2 h3" data-toggle="tooltip" data-placement="top" title="Slack" aria-label="Slack">
    <a class="text-white" target="_blank" href="https://cloudfoundry.slack.com/archives/CQ2U3L6DC">
      <i class="fab fa-slack"></i>
    </a>
  </li>
  
</ul>

        
        
      </div>
      <div class="col-12 col-sm-4 text-center py-2 order-sm-2">
        <small class="text-white">&copy; 2020 CloudFoundry.org Foundation, Inc. All Rights Reserved</small>
        <small class="ml-1"><a href="https://www.cloudfoundry.org/privacy-policy/" target="_blank">Privacy Policy</a></small>
	
		
	
      </div>
    </div>
  </div>
</footer>


    </div>
    
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js" integrity="sha384-ZMP7rVo3mIykV+2+9J3UJ46jBk0WLaUAdn689aCwoqbBJiSnjAK/l8WvCWPIPm49" crossorigin="anonymous"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js" integrity="sha384-ChfqqxuZUCnJSK3+MXmPNIyE6ZbWh2IMqE241rYiqJxyMiZ6OW/JmZQ5stwEULTy" crossorigin="anonymous"></script>






<script src="/js/main.min.fa74d55c6307c336362cc0822df44dc7238fafbc6143a52c3647f84771327ab5.js" integrity="sha256-&#43;nTVXGMHwzY2LMCCLfRNxyOPr7xhQ6UsNkf4R3EyerU=" crossorigin="anonymous"></script>



  </body>
</html>