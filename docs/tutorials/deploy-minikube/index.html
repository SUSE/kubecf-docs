<!doctype html>
<html lang="en" class="no-js">
  <head>
    <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="generator" content="Hugo 0.57.2" />

<META NAME="ROBOTS" CONTENT="INDEX, FOLLOW">



<link rel="shortcut icon" href="/favicons/favicon.ico" >
<link rel="apple-touch-icon" href="/favicons/apple-touch-icon-180x180.png" sizes="180x180">
<link rel="icon" type="image/png" href="/favicons/favicon-16x16.png" sizes="16x16">
<link rel="icon" type="image/png" href="/favicons/favicon-32x32.png" sizes="32x32">
<link rel="icon" type="image/png" href="/favicons/android-36x36.png" sizes="36x36">
<link rel="icon" type="image/png" href="/favicons/android-48x48.png" sizes="48x48">
<link rel="icon" type="image/png" href="/favicons/android-72x72.png" sizes="72x72">
<link rel="icon" type="image/png" href="/favicons/android-96x96.png" sizes="96x96">
<link rel="icon" type="image/png" href="/favicons/android-144x144.png" sizes="144x144">
<link rel="icon" type="image/png" href="/favicons/android-192x192.png" sizes="192x192">

<title>Deploy KubeCF in Minikube | KubeCF</title><meta property="og:title" content="Deploy KubeCF in Minikube" />
<meta property="og:description" content="Deploy a git KubeCF checkout in Minikube with Bazel.
" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://kubecf.io/docs/tutorials/deploy-minikube/" />
<meta property="article:published_time" content="2017-01-05T00:00:00+00:00" />
<meta property="article:modified_time" content="2020-02-28T14:36:32+01:00" /><meta property="og:site_name" content="KubeCF" />
<meta itemprop="name" content="Deploy KubeCF in Minikube">
<meta itemprop="description" content="Deploy a git KubeCF checkout in Minikube with Bazel.
">


<meta itemprop="datePublished" content="2017-01-05T00:00:00&#43;00:00" />
<meta itemprop="dateModified" content="2020-02-28T14:36:32&#43;01:00" />
<meta itemprop="wordCount" content="623">



<meta itemprop="keywords" content="" />
<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Deploy KubeCF in Minikube"/>
<meta name="twitter:description" content="Deploy a git KubeCF checkout in Minikube with Bazel.
"/>







<link rel="preload" href="/scss/main.min.a267473c50c1e3a3a293c7356bde2df7ef31dc904e49772ce6366a3703594ac5.css" as="style">
<link href="/scss/main.min.a267473c50c1e3a3a293c7356bde2df7ef31dc904e49772ce6366a3703594ac5.css" rel="stylesheet" integrity="">


<script
  src="https://code.jquery.com/jquery-3.5.1.min.js"
  integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0="
  crossorigin="anonymous"></script>

<script
  src="https://unpkg.com/lunr@2.3.8/lunr.min.js"
  integrity="sha384-vRQ9bDyE0Wnu+lMfm57BlYLO0/XauFuKpVsZPs7KEDwYKktWi5+Kz3MP8++DFlRY"
  crossorigin="anonymous"></script>




  </head>
  <body class="td-page">
    <header>
      
<nav class="js-navbar-scroll navbar navbar-expand navbar-dark flex-column flex-md-row td-navbar">
        <a class="navbar-brand" href="/">
		<span class="navbar-logo"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 1071.73 221.27"><defs><linearGradient id="a" x1="-424.28" y1="-348.73" x2="-423.28" y2="-348.73" gradientTransform="matrix(297.1, 0, 0, -297.1, 126823.42, -103498.81)" gradientUnits="userSpaceOnUse"><stop offset="0" stop-color="#00b1e1"/><stop offset="1" stop-color="#2c75ba"/></linearGradient></defs><title>Asset 4</title><path d="M128.57 217.38 62.99 130.7 46.1 150.82v66.56H0V.83H46.1V97.58L122.72.83H179.54L93.5 102.45 185.38 217.38H128.57z"/><path d="M290.79 217.38v-19.8c-10.71 12-29.54 23.69-55.19 23.69-34.42.0-50.65-18.82-50.65-49.34V60.57h41.24v95.12c0 21.76 11.36 28.9 28.89 28.9 15.91.0 28.57-8.77 35.71-17.86V60.57H332V217.38z"/><path d="M358 217.38V.83h41.24V80.7c12.33-15.91 29.86-24 48.37-24 39.93.0 69.48 31.17 69.48 82.47.0 52.27-29.87 82.13-69.48 82.13-18.83.0-36-8.44-48.37-24v20.13zm76.62-32.79c24 0 39.94-18.18 39.94-45.45s-15.91-45.78-39.94-45.78c-13.31.0-28.57 7.79-35.38 18.18v55.52C406 177.12 421.3 184.59 434.61 184.59z"/><path d="M525.51 138.81c0-45.45 33.44-82.14 81.17-82.14 46.75.0 78.56 35.07 78.56 86.36v9.09H568.69c2.6 19.81 18.51 36.36 45.13 36.36 13.31.0 31.82-5.84 41.88-15.58l18.18 26.62c-15.58 14.29-40.25 21.75-64.61 21.75C561.55 221.27 525.51 189.13 525.51 138.81zm81.17-49.35C581 89.46 570 108.62 568 124.2h77.27C644.34 109.27 634 89.46 606.68 89.46z"/><path d="M964.59 87.19V74.01 41.42H1071.73V.83H918.49V217.38H964.59V175.15 127.78 87.19z"/><path d="M1041.05 90l-23.77-18.87V90h-139a45.54 45.54.0 0 1-31.52-12.64c-.48-.45-1-.91-1.42-1.39a45.78 45.78.0 1 0 0 66.27c.46-.47.94-.93 1.42-1.39a45.59 45.59.0 0 1 31.52-12.64h139v18.87l23.77-18.87 24.07-19.1z" fill="url(#a)"/><path d="M868.23 146A65.12 65.12.0 1 1 868 72.22L907.56 51.6a110.68 110.68.0 0 0-19.67-23.52c-.61.42-1.23.82-1.88 1.18A23.68 23.68.0 0 1 850.85 6.08a110 110 0 0 0-16.21-4.34A112 112 0 0 0 820.33.0c-.17.6-.36 1.19-.58 1.78a23.69 23.69.0 0 1-30.52 13.81 23.6 23.6.0 0 1-11.62-9.44 110.35 110.35.0 0 0-27.46 14.39 25.32 25.32.0 0 1 1.18 2.77 23.68 23.68.0 0 1-31.21 29.81 109.19 109.19.0 0 0-12 28.55 23.7 23.7.0 0 1 12.95 34.57 23.6 23.6.0 0 1-15.21 11 109.48 109.48.0 0 0 9.38 29.88 23.69 23.69.0 0 1 28.5 36.76 108.8 108.8.0 0 0 27 16.67 23.68 23.68.0 0 1 45.87 9 109.18 109.18.0 0 0 31.26-5.21 23.68 23.68.0 0 1 40.22-23.2 109.46 109.46.0 0 0 20-24c-.48-.35-.93-.76-1.39-1.15z"/></svg></span><span class="text-uppercase font-weight-bold">KubeCF</span>
	</a>
	<div class="td-navbar-nav-scroll ml-md-auto" id="main_navbar">
		<ul class="navbar-nav mt-2 mt-lg-0">
			
			
			<li class="nav-item mr-4 mb-2 mb-lg-0">
				
				
				
				
				
				
				<a class="nav-link active" href="/docs/" ><span class="active">Documentation</span></a>
			</li>
			
			<li class="nav-item mr-4 mb-2 mb-lg-0">
				
				
				
				
				
				
				<a class="nav-link" href="/community/" ><span>Community</span></a>
			</li>
			
			
			
		</ul>
	</div>
	<div class="navbar-nav d-none d-lg-block">


<input
  type="search"
  class="form-control td-search-input"
  placeholder="&#xf002; Search this site…"
  aria-label="Search this site…"
  autocomplete="off"
  
  data-offline-search-index-json-src="/offline-search-index.0c16d5dda83858387961fff0fdd04eea2dd091fbd4685190da1ead1b849e0a2e5b0eb259805ed2764676f516a9d1e44fd1c996a619743eac45ef1a3f45ffabbc.json"
  data-offline-search-base-href="/"
  data-offline-search-max-results="10"
>

</div>
</nav>

    </header>
    <div class="container-fluid td-outer">
      <div class="td-main">
        <div class="row flex-xl-nowrap">
          <div class="col-12 col-md-3 col-xl-2 td-sidebar d-print-none">
            




<div id="td-sidebar-menu" class="td-sidebar__inner">
  
  <form class="td-sidebar__search d-flex align-items-center">
    


<input
  type="search"
  class="form-control td-search-input"
  placeholder="&#xf002; Search this site…"
  aria-label="Search this site…"
  autocomplete="off"
  
  data-offline-search-index-json-src="/offline-search-index.0c16d5dda83858387961fff0fdd04eea2dd091fbd4685190da1ead1b849e0a2e5b0eb259805ed2764676f516a9d1e44fd1c996a619743eac45ef1a3f45ffabbc.json"
  data-offline-search-base-href="/"
  data-offline-search-max-results="10"
>


    <button class="btn btn-link td-sidebar__toggle d-md-none p-0 ml-3 fas fa-bars" type="button" data-toggle="collapse" data-target="#td-section-nav" aria-controls="td-docs-nav" aria-expanded="false" aria-label="Toggle section navigation">
    </button>
  </form>
  
  <nav class="collapse td-sidebar-nav" id="td-section-nav">
    
    






<ul class="td-sidebar-nav__section pr-md-3">
  <li class="td-sidebar-nav__section-title">
    <a  href="/docs/" class="align-left pl-0 pr-2 td-sidebar-link td-sidebar-link__section">Documentation</a>
  </li>
  <ul>
    <li class="collapse show" id="docs">
      
      
      
      
      






<ul class="td-sidebar-nav__section pr-md-3">
  <li class="td-sidebar-nav__section-title">
    <a  href="/docs/overview/" class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">Overview</a>
  </li>
  <ul>
    <li class="collapse " id="docs-overview">
      
      
      
    </li>
  </ul>
</ul>

      
      
      
      






<ul class="td-sidebar-nav__section pr-md-3">
  <li class="td-sidebar-nav__section-title">
    <a  href="/docs/deployment/" class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">Deploying KubeCF</a>
  </li>
  <ul>
    <li class="collapse " id="docs-deployment">
      
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-docs-deployment-kubernetes-deploy" href="/docs/deployment/kubernetes-deploy/">Deployment Walkthrough</a>
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-docs-deployment-advanced-topics" href="/docs/deployment/advanced-topics/">Advanced Topics</a>
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-docs-deployment-affinities-and-tolerations" href="/docs/deployment/affinities-and-tolerations/">Affinities and Tolerations</a>
      
      
    </li>
  </ul>
</ul>

      
      
      
      






<ul class="td-sidebar-nav__section pr-md-3">
  <li class="td-sidebar-nav__section-title">
    <a  href="/docs/concepts/" class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">Concepts</a>
  </li>
  <ul>
    <li class="collapse " id="docs-concepts">
      
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-docs-concepts-operator" href="/docs/concepts/operator/">Operator</a>
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-docs-concepts-quarks" href="/docs/concepts/quarks/">Quarks</a>
      
      
    </li>
  </ul>
</ul>

      
      
      
      






<ul class="td-sidebar-nav__section pr-md-3">
  <li class="td-sidebar-nav__section-title">
    <a  href="/docs/tasks/" class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">Core Tasks</a>
  </li>
  <ul>
    <li class="collapse " id="docs-tasks">
      
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-docs-tasks-upgrade" href="/docs/tasks/upgrade/">KubeCF Upgrades</a>
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-docs-tasks-deploy" href="/docs/tasks/deploy/">KubeCF Deployment guidelines</a>
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-docs-tasks-secrets" href="/docs/tasks/secrets/">KubeCF and Secrets</a>
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-docs-tasks-bosh" href="/docs/tasks/bosh/">Test BOSH Releases</a>
      
      
    </li>
  </ul>
</ul>

      
      
      
      






<ul class="td-sidebar-nav__section pr-md-3">
  <li class="td-sidebar-nav__section-title">
    <a  href="/docs/tutorials/" class="align-left pl-0 pr-2 active td-sidebar-link td-sidebar-link__section">Tutorials</a>
  </li>
  <ul>
    <li class="collapse show" id="docs-tutorials">
      
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-docs-tutorials-deploy-k3s" href="/docs/tutorials/deploy-k3s/">Deploy KubeCF on K3s</a>
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-docs-tutorials-deploy-kind" href="/docs/tutorials/deploy-kind/">Deploy KubeCF on Kind</a>
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-docs-tutorials-eirini-persi" href="/docs/tutorials/eirini_persi/">Eirini Persistence broker</a>
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-docs-tutorials-deploy-stratos" href="/docs/tutorials/deploy-stratos/">Deploy Stratos next to KubeCF</a>
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-docs-tutorials-bosh-integration" href="/docs/tutorials/bosh-integration/">Bosh releases integration</a>
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page  active" id="m-docs-tutorials-deploy-minikube" href="/docs/tutorials/deploy-minikube/">Deploy KubeCF in Minikube</a>
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-docs-tutorials-run-smoke-tests" href="/docs/tutorials/run-smoke-tests/">Run smoke tests</a>
      
      
    </li>
  </ul>
</ul>

      
      
      
      






<ul class="td-sidebar-nav__section pr-md-3">
  <li class="td-sidebar-nav__section-title">
    <a  href="/docs/reference/" class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">Reference</a>
  </li>
  <ul>
    <li class="collapse " id="docs-reference">
      
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-docs-reference-tests" href="/docs/reference/tests/">Tests</a>
      
      
    </li>
  </ul>
</ul>

      
      
      
      






<ul class="td-sidebar-nav__section pr-md-3">
  <li class="td-sidebar-nav__section-title">
    <a  href="/docs/contribution-guidelines/" class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">Contribution Guidelines</a>
  </li>
  <ul>
    <li class="collapse " id="docs-contribution-guidelines">
      
      
      
    </li>
  </ul>
</ul>

      
      
    </li>
  </ul>
</ul>

  </nav>
</div>




          </div>
          <div class="d-none d-xl-block col-xl-2 td-toc d-print-none">
            






<div class="td-page-meta ml-2 pb-1 pt-2 mb-0">





<a href="https://github.com/cloudfoundry-incubator/kubecf-docs/edit/master/content/en/docs/Tutorials/deploy-minikube.md" target="_blank"><i class="fa fa-edit fa-fw"></i> Edit this page</a>
<a href="https://github.com/cloudfoundry-incubator/kubecf-docs/issues/new?title=Deploy%20KubeCF%20in%20Minikube" target="_blank"><i class="fab fa-github fa-fw"></i> Create documentation issue</a>


<a href="https://github.com/cloudfoundry-incubator/kubecf/issues/new" target="_blank"><i class="fas fa-tasks fa-fw"></i> Create project issue</a>

</div>






<nav id="TableOfContents">
<ul>
<li>
<ul>
<li><a href="#minikube">Minikube</a>
<ul>
<li><a href="#attention-dangers">Attention, Dangers</a></li>
<li><a href="#advanced-configuration">Advanced configuration</a></li>
</ul></li>
<li><a href="#cf-operator">cf-operator</a>
<ul>
<li><a href="#deployment-and-tear-down">Deployment and Tear-down</a></li>
</ul></li>
<li><a href="#kubecf">Kubecf</a>
<ul>
<li><a href="#system-domain">System domain</a></li>
<li><a href="#deployment-and-tear-down-1">Deployment and Tear-down</a></li>
<li><a href="#access">Access</a></li>
<li><a href="#advanced-topics">Advanced Topics</a>
<ul>
<li><a href="#diego-vs-eirini">Diego vs Eirini</a></li>
<li><a href="#ingress">Ingress</a>
<ul>
<li><a href="#installation-of-the-nginx-ingress-controller">Installation of the NGINX Ingress Controller</a></li>
<li><a href="#configure-kubecf">Configure kubecf</a></li>
</ul></li>
</ul></li>
</ul></li>
</ul></li>
</ul>
</nav>



          </div>
          <main class="col-12 col-md-9 col-xl-8 pl-md-5" role="main">
            
  

            <nav aria-label="breadcrumb" class="d-none d-md-block d-print-none">
	<ol class="breadcrumb spb-1">
		










<li class="breadcrumb-item" >
	<a href="https://kubecf.io/docs/">Documentation</a>
</li>




<li class="breadcrumb-item" >
	<a href="https://kubecf.io/docs/tutorials/">Tutorials</a>
</li>




<li class="breadcrumb-item active" aria-current="page">
	<a href="https://kubecf.io/docs/tutorials/deploy-minikube/">Deploy KubeCF in Minikube</a>
</li>

	</ol>
</nav	>

            
<div class="td-content">
	<h1>Deploy KubeCF in Minikube</h1>
    <div class="lead">Deploy a git KubeCF checkout in Minikube with Bazel.</div>
	       
	

<p>The intended audience of this document are developers wishing to
contribute to the Kubecf project.</p>

<p>Here we explain how to deploy Kubecf locally using:</p>

<ul>
<li>Minikube to manage a local Kubernetes cluster.</li>
<li>A cf-operator pinned with Bazel.</li>
<li>Kubecf built and deployed from the sources in the current checkout.</li>
</ul>

<h2 id="minikube">Minikube</h2>

<p>Minikube is one of several projects enabling the deployment,
management and tear-down of a local Kubernetes cluster.</p>

<p>The Kubecf Bazel workspace contains targets to deploy and/or tear-down
a Minikube-based cluster. Using these has the advantage of using a
specific version of Minikube. On the other side, the reduced
variability of the development environment is a disadvantage as well,
possibly allowing portability issues to slide through.</p>

<table>
<thead>
<tr>
<th>Operation</th>
<th>Command</th>
</tr>
</thead>

<tbody>
<tr>
<td>Deployment</td>
<td><code>bazel run //dev/minikube:start</code></td>
</tr>

<tr>
<td>Tear-down</td>
<td><code>bazel run //dev/minikube:delete</code></td>
</tr>
</tbody>
</table>

<h3 id="attention-dangers">Attention, Dangers</h3>

<p>Minikube edits the Kubernetes configuration file referenced by the
environment variable <code>KUBECONFIG</code>, or <code>~/.kube/config</code>.</p>

<p>To preserve the original configuration either make a backup of the
relevant file, or change <code>KUBECONFIG</code> to a different path specific to
the intended deployment.</p>

<h3 id="advanced-configuration">Advanced configuration</h3>

<p>The local <a href="../kube/minikube.md">Minikube Documentation</a> explains the
various environment variables which can be used to configure the
resources used by the cluster (CPUs, memory, disk size, etc.) in
detail.</p>

<h2 id="cf-operator">cf-operator</h2>

<p>The <a href="https://github.com/cloudfoundry-incubator/cf-operator" target="_blank">cf-operator</a> is the underlying generic tool to deploy a (modified)
BOSH deployment like Kubecf for use.</p>

<p>It has to be installed in the same kube cluster Kubecf will be deployed to.</p>

<h3 id="deployment-and-tear-down">Deployment and Tear-down</h3>

<p>The Kubecf Bazel workspace contains targets to deploy and/or tear-down
cf-operator:</p>

<table>
<thead>
<tr>
<th>Operation</th>
<th>Command</th>
</tr>
</thead>

<tbody>
<tr>
<td>Deployment</td>
<td><code>bazel run //dev/cf_operator:apply</code></td>
</tr>

<tr>
<td>Tear-down</td>
<td><code>bazel run //dev/cf_operator:delete</code></td>
</tr>
</tbody>
</table>

<h2 id="kubecf">Kubecf</h2>

<p>With all the prequisites handled by the preceding sections it is now
possible to build and deploy kubecf itself.</p>

<h3 id="system-domain">System domain</h3>

<p>The main configuration to set for kubecf is its system domain.
For the Minikube foundation we have to specify it as:</p>
<div class="highlight"><pre style="color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-sh" data-lang="sh"><span style="color:#24909d">echo</span> <span style="color:#ed9d13">&#34;system_domain: </span><span style="color:#6ab825;font-weight:bold">$(</span>minikube ip<span style="color:#6ab825;font-weight:bold">)</span><span style="color:#ed9d13">.xip.io&#34;</span> <span style="color:#ed9d13">\
</span><span style="color:#ed9d13"></span>  &gt; <span style="color:#ed9d13">&#34;</span><span style="color:#6ab825;font-weight:bold">$(</span>bazel info workspace<span style="color:#6ab825;font-weight:bold">)</span><span style="color:#ed9d13">/dev/kubecf/system_domain_values.yaml&#34;</span></code></pre></div>
<h3 id="deployment-and-tear-down-1">Deployment and Tear-down</h3>

<p>The Kubecf Bazel workspace contains targets to deploy and/or tear-down
kubecf from the sources:</p>

<table>
<thead>
<tr>
<th>Operation</th>
<th>Command</th>
</tr>
</thead>

<tbody>
<tr>
<td>Deployment</td>
<td><code>bazel run //dev/kubecf:apply</code></td>
</tr>

<tr>
<td>Tear-down</td>
<td><code>bazel run //dev/kubecf:delete</code></td>
</tr>
</tbody>
</table>

<p>In this default deployment kubecf is launched without Ingress, and
uses the Diego scheduler.</p>

<h3 id="access">Access</h3>

<p>Accessing the cluster from outside of the minikube VM requires
<a href="#ingress">ingress</a> to be set up correctly.</p>

<p>To access the cluster after the cf-operator has completed the
deployment and all pods are active invoke:</p>
<div class="highlight"><pre style="color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-sh" data-lang="sh">cf api --skip-ssl-validation <span style="color:#ed9d13">&#34;https://api.</span><span style="color:#6ab825;font-weight:bold">$(</span>minikube ip<span style="color:#6ab825;font-weight:bold">)</span><span style="color:#ed9d13">.xip.io&#34;</span>

<span style="color:#999;font-style:italic"># Copy the admin cluster password.</span>
<span style="color:#40ffff">acp</span>=<span style="color:#6ab825;font-weight:bold">$(</span>kubectl get secret <span style="color:#ed9d13">\
</span><span style="color:#ed9d13"></span>        --namespace kubecf kubecf.var-cf-admin-password <span style="color:#ed9d13">\
</span><span style="color:#ed9d13"></span>        -o <span style="color:#40ffff">jsonpath</span>=<span style="color:#ed9d13">&#39;{.data.password}&#39;</span> <span style="color:#ed9d13">\
</span><span style="color:#ed9d13"></span>        | base64 --decode<span style="color:#6ab825;font-weight:bold">)</span>

<span style="color:#999;font-style:italic"># Use the password from the previous step when requested.</span>
cf auth admin <span style="color:#ed9d13">&#34;</span><span style="color:#ed9d13">${</span><span style="color:#40ffff">acp</span><span style="color:#ed9d13">}</span><span style="color:#ed9d13">&#34;</span></code></pre></div>
<h3 id="advanced-topics">Advanced Topics</h3>

<h4 id="diego-vs-eirini">Diego vs Eirini</h4>

<p>Diego is the standard scheduler used by kubecf to deploy CF
applications. Eirini is an alternative to Diego that follows a more
Kubernetes native approach, deploying the CF apps directly to a
Kubernetes namespace.</p>

<p>To activate this alternative, add a file matching the pattern
<code>*values.yaml</code> to the directory <strong>dev/kubecf</strong> and containing</p>
<div class="highlight"><pre style="color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml">features:<span style="color:#666">
</span><span style="color:#666">  </span>eirini:<span style="color:#666">
</span><span style="color:#666">    </span>enabled:<span style="color:#666"> </span><span style="color:#6ab825;font-weight:bold">true</span></code></pre></div>
<p>before deploying kubecf.</p>

<h4 id="ingress">Ingress</h4>

<p>By default, the cluster is exposed through its Kubernetes services.</p>

<p>To use the NGINX ingress instead, it is necessary to:</p>

<ul>
<li>Install and configure the NGINX Ingress Controller.</li>
<li>Configure Kubecf to use the ingress controller.</li>
</ul>

<p>This has to happen before deploying kubecf.</p>

<h5 id="installation-of-the-nginx-ingress-controller">Installation of the NGINX Ingress Controller</h5>
<div class="highlight"><pre style="color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-sh" data-lang="sh">helm install stable/nginx-ingress <span style="color:#ed9d13">\
</span><span style="color:#ed9d13"></span>  --name ingress <span style="color:#ed9d13">\
</span><span style="color:#ed9d13"></span>  --namespace ingress <span style="color:#ed9d13">\
</span><span style="color:#ed9d13"></span>  --set <span style="color:#ed9d13">&#34;tcp.2222=kubecf/kubecf-scheduler:2222&#34;</span> <span style="color:#ed9d13">\
</span><span style="color:#ed9d13"></span>  --set <span style="color:#ed9d13">&#34;tcp.&lt;services.tcp-router.port_range.start&gt;=kubecf/kubecf-tcp-router:&lt;services.tcp-router.port_range.start&gt;&#34;</span> <span style="color:#ed9d13">\
</span><span style="color:#ed9d13"></span>  ...
  --set <span style="color:#ed9d13">&#34;tcp.&lt;services.tcp-router.port_range.end&gt;=kubecf/kubecf-tcp-router:&lt;services.tcp-router.port_range.end&gt;&#34;</span> <span style="color:#ed9d13">\
</span><span style="color:#ed9d13"></span>  --set <span style="color:#ed9d13">&#34;controller.service.externalIPs={</span><span style="color:#6ab825;font-weight:bold">$(</span>minikube ip<span style="color:#6ab825;font-weight:bold">)</span><span style="color:#ed9d13">}&#34;</span></code></pre></div>
<p>The <code>tcp.&lt;port&gt;</code> option uses the NGINX TCP pass-through.</p>

<p>In the case of the <code>tcp-router</code> ports, one <code>--set</code> for each port is required, starting with
<code>services.tcp-router.port_range.start</code> and ending with <code>services.tcp-router.port_range.end</code>. Those
values are defined on the <code>values.yaml</code> file with default values.</p>

<p>The last flag in the command above assigns the external IP of the
cluster to the Ingress Controller service.</p>

<h5 id="configure-kubecf">Configure kubecf</h5>

<p>Place a file matching the pattern <code>*values.yaml</code> into the directory
<strong>dev/kubecf</strong> and containing</p>
<div class="highlight"><pre style="color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml">features:<span style="color:#666">
</span><span style="color:#666">  </span>ingress:<span style="color:#666">
</span><span style="color:#666">    </span>enabled:<span style="color:#666"> </span><span style="color:#6ab825;font-weight:bold">true</span></code></pre></div>
	
	
	<div class="text-muted mt-5 pt-3 border-top">Last modified February 28, 2020: <a  href="https://github.com/cloudfoundry-incubator/kubecf-docs/commit/d4e4538aac5b8a025b61c826cc0fda9d8d282d56">Fixup command to make it easy to copy-paste (d4e4538)</a>
</div>
</div>


          </main>
        </div>
      </div>
      
<footer class="bg-dark py-5 row d-print-none">
  <div class="container-fluid mx-sm-5">
    <div class="row">
      <div class="col-6 col-sm-4 text-xs-center order-sm-2">
        
        
        
      </div>
      <div class="col-6 col-sm-4 text-right text-xs-center order-sm-3">
        
        
        
<ul class="list-inline mb-0">
  
  <li class="list-inline-item mx-2 h3" data-toggle="tooltip" data-placement="top" title="GitHub" aria-label="GitHub">
    <a class="text-white" target="_blank" rel="noopener noreferrer" href="https://github.com/cloudfoundry-incubator/kubecf">
      <i class="fab fa-github"></i>
    </a>
  </li>
  
  <li class="list-inline-item mx-2 h3" data-toggle="tooltip" data-placement="top" title="Slack" aria-label="Slack">
    <a class="text-white" target="_blank" rel="noopener noreferrer" href="https://cloudfoundry.slack.com/archives/CQ2U3L6DC">
      <i class="fab fa-slack"></i>
    </a>
  </li>
  
</ul>

        
        
      </div>
      <div class="col-12 col-sm-4 text-center py-2 order-sm-2">
        <small class="text-white">&copy; 2020 CloudFoundry.org Foundation, Inc. All Rights Reserved</small>
        <small class="ml-1"><a href="https://www.cloudfoundry.org/privacy-policy/" target="_blank">Privacy Policy</a></small>
	
		
	
      </div>
    </div>
  </div>
</footer>


    </div>
    
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js" integrity="sha384-ZMP7rVo3mIykV+2+9J3UJ46jBk0WLaUAdn689aCwoqbBJiSnjAK/l8WvCWPIPm49" crossorigin="anonymous"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js" integrity="sha384-ChfqqxuZUCnJSK3+MXmPNIyE6ZbWh2IMqE241rYiqJxyMiZ6OW/JmZQ5stwEULTy" crossorigin="anonymous"></script>













<script src="/js/main.min.460c8ae21829f9b330823a08f34ac961d7d0daa8874c8c9eba7ea0484bb42a79.js" integrity="sha256-RgyK4hgp&#43;bMwgjoI80rJYdfQ2qiHTIyeun6gSEu0Knk=" crossorigin="anonymous"></script>




  </body>
</html>