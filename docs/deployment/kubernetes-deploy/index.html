<!doctype html>
<html lang="en" class="no-js">
  <head>
    <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="generator" content="Hugo 0.57.2" />

<META NAME="ROBOTS" CONTENT="INDEX, FOLLOW">



<link rel="shortcut icon" href="/favicons/favicon.ico" >
<link rel="apple-touch-icon" href="/favicons/apple-touch-icon-180x180.png" sizes="180x180">
<link rel="icon" type="image/png" href="/favicons/favicon-16x16.png" sizes="16x16">
<link rel="icon" type="image/png" href="/favicons/favicon-32x32.png" sizes="32x32">
<link rel="icon" type="image/png" href="/favicons/android-36x36.png" sizes="36x36">
<link rel="icon" type="image/png" href="/favicons/android-48x48.png" sizes="48x48">
<link rel="icon" type="image/png" href="/favicons/android-72x72.png" sizes="72x72">
<link rel="icon" type="image/png" href="/favicons/android-96x96.png" sizes="96x96">
<link rel="icon" type="image/png" href="/favicons/android-144x144.png" sizes="144x144">
<link rel="icon" type="image/png" href="/favicons/android-192x192.png" sizes="192x192">

<title>Deployment Walkthrough | KubeCF</title><meta property="og:title" content="Deployment Walkthrough" />
<meta property="og:description" content="Explain steps to deploy KubeCF in any Kubernetes cluster
" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://kubecf.io/docs/deployment/kubernetes-deploy/" />
<meta property="article:published_time" content="2017-01-05T00:00:00+00:00" />
<meta property="article:modified_time" content="2020-10-09T14:40:28+02:00" /><meta property="og:site_name" content="KubeCF" />
<meta itemprop="name" content="Deployment Walkthrough">
<meta itemprop="description" content="Explain steps to deploy KubeCF in any Kubernetes cluster
">


<meta itemprop="datePublished" content="2017-01-05T00:00:00&#43;00:00" />
<meta itemprop="dateModified" content="2020-10-09T14:40:28&#43;02:00" />
<meta itemprop="wordCount" content="1048">



<meta itemprop="keywords" content="" />
<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Deployment Walkthrough"/>
<meta name="twitter:description" content="Explain steps to deploy KubeCF in any Kubernetes cluster
"/>







<link rel="preload" href="/scss/main.min.a267473c50c1e3a3a293c7356bde2df7ef31dc904e49772ce6366a3703594ac5.css" as="style">
<link href="/scss/main.min.a267473c50c1e3a3a293c7356bde2df7ef31dc904e49772ce6366a3703594ac5.css" rel="stylesheet" integrity="">


<script
  src="https://code.jquery.com/jquery-3.5.1.min.js"
  integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0="
  crossorigin="anonymous"></script>

<script
  src="https://unpkg.com/lunr@2.3.8/lunr.min.js"
  integrity="sha384-vRQ9bDyE0Wnu+lMfm57BlYLO0/XauFuKpVsZPs7KEDwYKktWi5+Kz3MP8++DFlRY"
  crossorigin="anonymous"></script>




  </head>
  <body class="td-page">
    <header>
      
<nav class="js-navbar-scroll navbar navbar-expand navbar-dark flex-column flex-md-row td-navbar">
        <a class="navbar-brand" href="/">
		<span class="navbar-logo"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 1071.73 221.27"><defs><linearGradient id="a" x1="-424.28" y1="-348.73" x2="-423.28" y2="-348.73" gradientTransform="matrix(297.1, 0, 0, -297.1, 126823.42, -103498.81)" gradientUnits="userSpaceOnUse"><stop offset="0" stop-color="#00b1e1"/><stop offset="1" stop-color="#2c75ba"/></linearGradient></defs><title>Asset 4</title><path d="M128.57 217.38 62.99 130.7 46.1 150.82v66.56H0V.83H46.1V97.58L122.72.83H179.54L93.5 102.45 185.38 217.38H128.57z"/><path d="M290.79 217.38v-19.8c-10.71 12-29.54 23.69-55.19 23.69-34.42.0-50.65-18.82-50.65-49.34V60.57h41.24v95.12c0 21.76 11.36 28.9 28.89 28.9 15.91.0 28.57-8.77 35.71-17.86V60.57H332V217.38z"/><path d="M358 217.38V.83h41.24V80.7c12.33-15.91 29.86-24 48.37-24 39.93.0 69.48 31.17 69.48 82.47.0 52.27-29.87 82.13-69.48 82.13-18.83.0-36-8.44-48.37-24v20.13zm76.62-32.79c24 0 39.94-18.18 39.94-45.45s-15.91-45.78-39.94-45.78c-13.31.0-28.57 7.79-35.38 18.18v55.52C406 177.12 421.3 184.59 434.61 184.59z"/><path d="M525.51 138.81c0-45.45 33.44-82.14 81.17-82.14 46.75.0 78.56 35.07 78.56 86.36v9.09H568.69c2.6 19.81 18.51 36.36 45.13 36.36 13.31.0 31.82-5.84 41.88-15.58l18.18 26.62c-15.58 14.29-40.25 21.75-64.61 21.75C561.55 221.27 525.51 189.13 525.51 138.81zm81.17-49.35C581 89.46 570 108.62 568 124.2h77.27C644.34 109.27 634 89.46 606.68 89.46z"/><path d="M964.59 87.19V74.01 41.42H1071.73V.83H918.49V217.38H964.59V175.15 127.78 87.19z"/><path d="M1041.05 90l-23.77-18.87V90h-139a45.54 45.54.0 0 1-31.52-12.64c-.48-.45-1-.91-1.42-1.39a45.78 45.78.0 1 0 0 66.27c.46-.47.94-.93 1.42-1.39a45.59 45.59.0 0 1 31.52-12.64h139v18.87l23.77-18.87 24.07-19.1z" fill="url(#a)"/><path d="M868.23 146A65.12 65.12.0 1 1 868 72.22L907.56 51.6a110.68 110.68.0 0 0-19.67-23.52c-.61.42-1.23.82-1.88 1.18A23.68 23.68.0 0 1 850.85 6.08a110 110 0 0 0-16.21-4.34A112 112 0 0 0 820.33.0c-.17.6-.36 1.19-.58 1.78a23.69 23.69.0 0 1-30.52 13.81 23.6 23.6.0 0 1-11.62-9.44 110.35 110.35.0 0 0-27.46 14.39 25.32 25.32.0 0 1 1.18 2.77 23.68 23.68.0 0 1-31.21 29.81 109.19 109.19.0 0 0-12 28.55 23.7 23.7.0 0 1 12.95 34.57 23.6 23.6.0 0 1-15.21 11 109.48 109.48.0 0 0 9.38 29.88 23.69 23.69.0 0 1 28.5 36.76 108.8 108.8.0 0 0 27 16.67 23.68 23.68.0 0 1 45.87 9 109.18 109.18.0 0 0 31.26-5.21 23.68 23.68.0 0 1 40.22-23.2 109.46 109.46.0 0 0 20-24c-.48-.35-.93-.76-1.39-1.15z"/></svg></span><span class="text-uppercase font-weight-bold">KubeCF</span>
	</a>
	<div class="td-navbar-nav-scroll ml-md-auto" id="main_navbar">
		<ul class="navbar-nav mt-2 mt-lg-0">
			
			
			<li class="nav-item mr-4 mb-2 mb-lg-0">
				
				
				
				
				
				
				<a class="nav-link active" href="/docs/" ><span class="active">Documentation</span></a>
			</li>
			
			<li class="nav-item mr-4 mb-2 mb-lg-0">
				
				
				
				
				
				
				<a class="nav-link" href="/community/" ><span>Community</span></a>
			</li>
			
			
			
		</ul>
	</div>
	<div class="navbar-nav d-none d-lg-block">


<input
  type="search"
  class="form-control td-search-input"
  placeholder="&#xf002; Search this site…"
  aria-label="Search this site…"
  autocomplete="off"
  
  data-offline-search-index-json-src="/offline-search-index.9dc6c902b1631f1d6fcc81bd48111a0e07aea2d955d0318f84d7c10fc5e853511c8ac4c48def76e2deedc1c9652023f23798c82de5da4233fdc50070d9f54343.json"
  data-offline-search-base-href="/"
  data-offline-search-max-results="10"
>

</div>
</nav>

    </header>
    <div class="container-fluid td-outer">
      <div class="td-main">
        <div class="row flex-xl-nowrap">
          <div class="col-12 col-md-3 col-xl-2 td-sidebar d-print-none">
            




<div id="td-sidebar-menu" class="td-sidebar__inner">
  
  <form class="td-sidebar__search d-flex align-items-center">
    


<input
  type="search"
  class="form-control td-search-input"
  placeholder="&#xf002; Search this site…"
  aria-label="Search this site…"
  autocomplete="off"
  
  data-offline-search-index-json-src="/offline-search-index.9dc6c902b1631f1d6fcc81bd48111a0e07aea2d955d0318f84d7c10fc5e853511c8ac4c48def76e2deedc1c9652023f23798c82de5da4233fdc50070d9f54343.json"
  data-offline-search-base-href="/"
  data-offline-search-max-results="10"
>


    <button class="btn btn-link td-sidebar__toggle d-md-none p-0 ml-3 fas fa-bars" type="button" data-toggle="collapse" data-target="#td-section-nav" aria-controls="td-docs-nav" aria-expanded="false" aria-label="Toggle section navigation">
    </button>
  </form>
  
  <nav class="collapse td-sidebar-nav" id="td-section-nav">
    
    






<ul class="td-sidebar-nav__section pr-md-3">
  <li class="td-sidebar-nav__section-title">
    <a  href="/docs/" class="align-left pl-0 pr-2 td-sidebar-link td-sidebar-link__section">Documentation</a>
  </li>
  <ul>
    <li class="collapse show" id="docs">
      
      
      
      
      






<ul class="td-sidebar-nav__section pr-md-3">
  <li class="td-sidebar-nav__section-title">
    <a  href="/docs/overview/" class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">Overview</a>
  </li>
  <ul>
    <li class="collapse " id="docs-overview">
      
      
      
    </li>
  </ul>
</ul>

      
      
      
      






<ul class="td-sidebar-nav__section pr-md-3">
  <li class="td-sidebar-nav__section-title">
    <a  href="/docs/deployment/" class="align-left pl-0 pr-2 active td-sidebar-link td-sidebar-link__section">Deploying KubeCF</a>
  </li>
  <ul>
    <li class="collapse show" id="docs-deployment">
      
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page  active" id="m-docs-deployment-kubernetes-deploy" href="/docs/deployment/kubernetes-deploy/">Deployment Walkthrough</a>
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-docs-deployment-advanced-topics" href="/docs/deployment/advanced-topics/">Advanced Topics</a>
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-docs-deployment-affinities-and-tolerations" href="/docs/deployment/affinities-and-tolerations/">Affinities and Tolerations</a>
      
      
    </li>
  </ul>
</ul>

      
      
      
      






<ul class="td-sidebar-nav__section pr-md-3">
  <li class="td-sidebar-nav__section-title">
    <a  href="/docs/concepts/" class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">Concepts</a>
  </li>
  <ul>
    <li class="collapse " id="docs-concepts">
      
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-docs-concepts-operator" href="/docs/concepts/operator/">Operator</a>
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-docs-concepts-quarks" href="/docs/concepts/quarks/">Quarks</a>
      
      
    </li>
  </ul>
</ul>

      
      
      
      






<ul class="td-sidebar-nav__section pr-md-3">
  <li class="td-sidebar-nav__section-title">
    <a  href="/docs/tasks/" class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">Core Tasks</a>
  </li>
  <ul>
    <li class="collapse " id="docs-tasks">
      
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-docs-tasks-upgrade" href="/docs/tasks/upgrade/">KubeCF Upgrades</a>
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-docs-tasks-deploy" href="/docs/tasks/deploy/">KubeCF Deployment guidelines</a>
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-docs-tasks-secrets" href="/docs/tasks/secrets/">KubeCF and Secrets</a>
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-docs-tasks-bosh" href="/docs/tasks/bosh/">Test BOSH Releases</a>
      
      
    </li>
  </ul>
</ul>

      
      
      
      






<ul class="td-sidebar-nav__section pr-md-3">
  <li class="td-sidebar-nav__section-title">
    <a  href="/docs/tutorials/" class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">Tutorials</a>
  </li>
  <ul>
    <li class="collapse " id="docs-tutorials">
      
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-docs-tutorials-deploy-k3s" href="/docs/tutorials/deploy-k3s/">Deploy KubeCF on K3s</a>
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-docs-tutorials-deploy-kind" href="/docs/tutorials/deploy-kind/">Deploy KubeCF on Kind</a>
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-docs-tutorials-eirini-persi" href="/docs/tutorials/eirini_persi/">Eirini Persistence broker</a>
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-docs-tutorials-deploy-stratos" href="/docs/tutorials/deploy-stratos/">Deploy Stratos next to KubeCF</a>
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-docs-tutorials-bosh-integration" href="/docs/tutorials/bosh-integration/">Bosh releases integration</a>
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-docs-tutorials-deploy-minikube" href="/docs/tutorials/deploy-minikube/">Deploy KubeCF in Minikube</a>
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-docs-tutorials-run-smoke-tests" href="/docs/tutorials/run-smoke-tests/">Run smoke tests</a>
      
      
    </li>
  </ul>
</ul>

      
      
      
      






<ul class="td-sidebar-nav__section pr-md-3">
  <li class="td-sidebar-nav__section-title">
    <a  href="/docs/reference/" class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">Reference</a>
  </li>
  <ul>
    <li class="collapse " id="docs-reference">
      
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-docs-reference-tests" href="/docs/reference/tests/">Tests</a>
      
      
    </li>
  </ul>
</ul>

      
      
      
      






<ul class="td-sidebar-nav__section pr-md-3">
  <li class="td-sidebar-nav__section-title">
    <a  href="/docs/contribution-guidelines/" class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">Contribution Guidelines</a>
  </li>
  <ul>
    <li class="collapse " id="docs-contribution-guidelines">
      
      
      
    </li>
  </ul>
</ul>

      
      
    </li>
  </ul>
</ul>

  </nav>
</div>




          </div>
          <div class="d-none d-xl-block col-xl-2 td-toc d-print-none">
            






<div class="td-page-meta ml-2 pb-1 pt-2 mb-0">





<a href="https://github.com/cloudfoundry-incubator/kubecf-docs/edit/master/content/en/docs/Deployment/kubernetes-deploy.md" target="_blank"><i class="fa fa-edit fa-fw"></i> Edit this page</a>
<a href="https://github.com/cloudfoundry-incubator/kubecf-docs/issues/new?title=Deployment%20Walkthrough" target="_blank"><i class="fab fa-github fa-fw"></i> Create documentation issue</a>


<a href="https://github.com/cloudfoundry-incubator/kubecf/issues/new" target="_blank"><i class="fas fa-tasks fa-fw"></i> Create project issue</a>

</div>






<nav id="TableOfContents">
<ul>
<li>
<ul>
<li><a href="#before">Before</a></li>
<li><a href="#kubernetes">Kubernetes</a></li>
<li><a href="#cf-operator">cf-operator</a>
<ul>
<li><a href="#deployment">Deployment</a></li>
<li><a href="#tear-down">Tear-down</a></li>
</ul></li>
<li><a href="#kubecf">KubeCF</a>
<ul>
<li><a href="#deployment-1">Deployment</a></li>
<li><a href="#tear-down-1">Tear-down</a></li>
<li><a href="#access">Access</a></li>
</ul></li>
</ul></li>
</ul>
</nav>



          </div>
          <main class="col-12 col-md-9 col-xl-8 pl-md-5" role="main">
            
  

            <nav aria-label="breadcrumb" class="d-none d-md-block d-print-none">
	<ol class="breadcrumb spb-1">
		










<li class="breadcrumb-item" >
	<a href="https://kubecf.io/docs/">Documentation</a>
</li>




<li class="breadcrumb-item" >
	<a href="https://kubecf.io/docs/deployment/">Deploying KubeCF</a>
</li>




<li class="breadcrumb-item active" aria-current="page">
	<a href="https://kubecf.io/docs/deployment/kubernetes-deploy/">Deployment Walkthrough</a>
</li>

	</ol>
</nav	>

            
<div class="td-content">
	<h1>Deployment Walkthrough</h1>
    <div class="lead">Explain steps to deploy KubeCF in any Kubernetes cluster</div>
	       
	

<p>The intended audience of this document are developers wishing to contribute to the Kubecf project.</p>

<p>Here we explain how to deploy Kubecf using:</p>

<ul>
<li>A generic kubernetes cluster.</li>
<li>A released cf-operator helm chart.</li>
<li>A released kubecf helm chart.</li>
</ul>

<h2 id="before">Before</h2>

<p>To assure that <code>kubecf</code> is installed with the correct <code>cf-operator</code> version, it&rsquo;s highly recommended
to use the kubecf bundle artifact from the GitHub <a href="https://github.com/cloudfoundry-incubator/kubecf/releases" target="_blank">releases</a>
page.</p>

<h2 id="kubernetes">Kubernetes</h2>

<p>In contrast to other instructions, we are not set on using a local cluster. Any Kubernetes cluster will
do, assuming that the following requirements are met:</p>

<ul>
<li><p>Presence of a default storage class (provisioner).</p></li>

<li><p>For use with a diego-based kubecf (default), a node OS with XFS
support.</p>

<ul>
<li>For GKE, using the option <code>--image-type UBUNTU</code> with the <code>gcloud beta container</code> command selects
such an OS.</li>
</ul></li>
</ul>

<p>This can be any of, but is not restricted to:</p>

<ul>
<li>GKE</li>
<li>AKS</li>
<li>EKS</li>
</ul>

<p>Note that how to deploy and tear-down such a cluster is outside of the
scope of instructions.</p>

<h2 id="cf-operator">cf-operator</h2>

<p>The <a href="https://github.com/cloudfoundry-incubator/cf-operator" target="_blank">cf-operator</a> is the underlying generic tool to deploy a (modified)
BOSH deployment like Kubecf for use.</p>

<p>It has to be installed in the same Kubernetes cluster that Kubecf will
be deployed to.</p>

<p>Here we are not using development-specific dependencies like bazel,
but only generic tools, i.e. <code>kubectl</code> and <code>helm</code>.</p>

<p>Installing and configuring Helm is the same regardless of
the chosen foundation, and assuming that the cluster does not come
with Helm Tiller pre-installed.</p>

<h3 id="deployment">Deployment</h3>

<p>First, let&rsquo;s create the <code>cf-operator</code> namespace manually</p>
<div class="highlight"><pre style="color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">$ kubectl create namespace cf-operator

namespace/cf-operator</code></pre></div>
<p>then we can proceed with the <code>cf-operator</code> deployment</p>
<div class="highlight"><pre style="color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">$ helm install cf-operator <span style="color:#ed9d13">\
</span><span style="color:#ed9d13"></span>--namespace cf-operator <span style="color:#ed9d13">\
</span><span style="color:#ed9d13"></span>--set <span style="color:#ed9d13">&#34;global.singleNamespace.name=kubecf&#34;</span> <span style="color:#ed9d13">\
</span><span style="color:#ed9d13"></span>./cf-operator.tgz

NAME: cf-operator
LAST DEPLOYED: Mon Sep <span style="color:#3677a9">28</span> <span style="color:#3677a9">11</span>:30:32 <span style="color:#3677a9">2020</span>
NAMESPACE: cf-operator
STATUS: deployed
REVISION: <span style="color:#3677a9">1</span>
TEST SUITE: None
NOTES:
Running the operator will install the following CRD´s:

- boshdeployments.quarks.cloudfoundry.org
- quarksjobs.quarks.cloudfoundry.org
- quarksecrets.quarks.cloudfoundry.org
- quarkstatefulsets.quarks.cloudfoundry.org

You can always verify <span style="color:#6ab825;font-weight:bold">if</span> the CRD´s are installed, by running:
 $ kubectl get crds

You can check the charts README: <span style="color:#ed9d13">`</span>helm show readme quarks/cf-operator<span style="color:#ed9d13">`</span> <span style="color:#6ab825;font-weight:bold">for</span> more information about configuration options.

Interacting with the cf-operator pod

<span style="color:#3677a9">1</span>. Check the cf-operator pod status
  kubectl -n cf-operator get pods

<span style="color:#3677a9">2</span>. Tail the cf-operator pod logs
  <span style="color:#24909d">export</span> <span style="color:#40ffff">OPERATOR_POD</span>=<span style="color:#6ab825;font-weight:bold">$(</span>kubectl get pods -l <span style="color:#40ffff">name</span>=cf-operator --namespace cf-operator --output name<span style="color:#6ab825;font-weight:bold">)</span>
  kubectl -n cf-operator logs <span style="color:#40ffff">$OPERATOR_POD</span> -f

<span style="color:#3677a9">3</span>. Apply one of the BOSH deployment manifest examples
  kubectl -n kubecf apply -f docs/examples/bosh-deployment/boshdeployment-with-custom-variable.yaml

<span style="color:#3677a9">4</span>. See the cf-operator in action!
  watch -c <span style="color:#ed9d13">&#34;kubectl -n kubecf get pods&#34;</span></code></pre></div>
<p>and wait</p>
<div class="highlight"><pre style="color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">$ watch -c kubectl -n cf-operator get pods

Every <span style="color:#3677a9">2</span>.0s: kubectl -n cf-operator get pods                                                                 Jaimes-MacBook-Pro.local: Mon Sep <span style="color:#3677a9">28</span> <span style="color:#3677a9">11</span>:31:04 <span style="color:#3677a9">2020</span>

NAME                                         READY   STATUS    RESTARTS   AGE
cf-operator-c89644498-q75dh                  <span style="color:#3677a9">1</span>/1     Running   <span style="color:#3677a9">0</span>          30s
cf-operator-quarks-job-85665697bb-72vsp      <span style="color:#3677a9">1</span>/1     Running   <span style="color:#3677a9">0</span>          31s
cf-operator-quarks-secret-844844556b-xl9jq   <span style="color:#3677a9">1</span>/1     Running   <span style="color:#3677a9">0</span>          31s</code></pre></div>
<p>until all the pods are up &amp; running.</p>



<div class="alert alert-primary" role="alert">
<h4 class="alert-heading">Note</h4>
<blockquote>
<p>The above <code>helm install</code> will generate many controllers spread over multiple pods inside the <code>cf-operator</code>
namespace. Most of these controllers run inside the <code>cf-operator</code> pod.</p>

<p>The <code>global.singleNamespace.name=kubecf</code> path tells the
controllers to watch for CRD´s instances into the <code>kubecf</code> namespace.</p>

<p>The cf-operator helm chart will generate the <code>kubecf</code> namespace during installation, and
eventually one of the controllers will use a webhook to label this namespace with the
<code>cf-operator-ns</code> key.</p>

<p>If the <code>kubecf</code> namespace is deleted, but the operators are still running, they will no longer
know which namespace to watch. This can lead to problems, so make sure you also delete the pods
inside the <code>cfo</code> namespace, after deleting the <code>kubecf</code> namespace.</p>
</blockquote>

</div>




<div class="alert alert-primary" role="alert">
<h4 class="alert-heading">Note</h4>
<blockquote>
<p>How the namespace the operator is installed into (<code>cf-operator</code>) differs from the namespace the operator
is watching for deployments (<code>kubecf</code>).</p>

<p>This form of deployment enables restarting the operator because it is not affected by webhooks.</p>

<p>It further enables the deletion of the KubeCF deployment namespace to start from scratch, without
redeploying the operator itself.</p>
</blockquote>

</div>


<h3 id="tear-down">Tear-down</h3>
<div class="highlight"><pre style="color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">$ helm uninstall cf-operator --namespace cf-operator

release <span style="color:#ed9d13">&#34;cf-operator&#34;</span> uninstalled</code></pre></div>
<h2 id="kubecf">KubeCF</h2>

<p>With all the prerequisites handled by the preceding sections it is now possible to build and deploy
kubecf itself.</p>

<p>This again uses helm and a released helm chart.</p>

<h3 id="deployment-1">Deployment</h3>
<div class="highlight"><pre style="color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">$ helm install kubecf <span style="color:#ed9d13">\
</span><span style="color:#ed9d13"></span>--namespace kubecf <span style="color:#ed9d13">\
</span><span style="color:#ed9d13"></span>--set <span style="color:#ed9d13">&#34;system_domain=kubecf.yourdomain.net&#34;</span> <span style="color:#ed9d13">\
</span><span style="color:#ed9d13"></span>./kubecf_release.tgz

NAME: kubecf
LAST DEPLOYED: Mon Sep <span style="color:#3677a9">28</span> <span style="color:#3677a9">11</span>:39:01 <span style="color:#3677a9">2020</span>
NAMESPACE: kubecf
STATUS: deployed
REVISION: <span style="color:#3677a9">1</span>
TEST SUITE: None
NOTES:
Welcome to your new deployment of KubeCF.

    The endpoint <span style="color:#6ab825;font-weight:bold">for</span> use by the <span style="color:#ed9d13">`</span>cf<span style="color:#ed9d13">`</span> client is
        https://api.kubecf.suse.dev

    To target this endpoint and login, run
        cf login --skip-ssl-validation -a https://api.kubecf.suse.dev -u admin

    Please remember, it may take some <span style="color:#24909d">time</span> <span style="color:#6ab825;font-weight:bold">for</span> everything to come online.

    You can use
        kubectl get pods --namespace kubecf

    to spot-check <span style="color:#6ab825;font-weight:bold">if</span> everything is up and running, or
        watch -c <span style="color:#ed9d13">&#39;kubectl get pods --namespace kubecf&#39;</span>

    to monitor continuously.

    You will be running <span style="color:#3677a9">1</span> diego cell(s), with 40960Mi of disk each.
    The default app quota is <span style="color:#24909d">set</span> to 1024Mi, which means you<span style="color:#a61717;background-color:#e3d2d2">&#39;</span>ll have enough disk
    space to run about <span style="color:#3677a9">40</span> apps.

    The online documentation (release notes, deployment guide) can be found at
        https://kubecf.io/docs</code></pre></div>
<p>and wait until all the pods are up &amp; running (which can take around 20 minutes)</p>
<div class="highlight"><pre style="color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">$  watch -c <span style="color:#ed9d13">&#39;kubectl get pods --namespace kubecf&#39;</span>

Every <span style="color:#3677a9">2</span>.0s: kubectl get pods --namespace kubecf                                                             Jaimes-MacBook-Pro.local: Mon Sep <span style="color:#3677a9">28</span> <span style="color:#3677a9">12</span>:03:23 <span style="color:#3677a9">2020</span>

NAME                                     READY   STATUS      RESTARTS   AGE
api-0                                    <span style="color:#3677a9">17</span>/17   Running     <span style="color:#3677a9">1</span>          16m
apps-dns-77b46d5657-5rm24                <span style="color:#3677a9">1</span>/1     Running     <span style="color:#3677a9">0</span>          24m
auctioneer-0                             <span style="color:#3677a9">6</span>/6     Running     <span style="color:#3677a9">1</span>          16m
bosh-dns-8679ff8bd4-5hb95                <span style="color:#3677a9">1</span>/1     Running     <span style="color:#3677a9">0</span>          22m
bosh-dns-8679ff8bd4-fzkhq                <span style="color:#3677a9">1</span>/1     Running     <span style="color:#3677a9">0</span>          22m
cc-worker-0                              <span style="color:#3677a9">6</span>/6     Running     <span style="color:#3677a9">0</span>          16m
credhub-0                                <span style="color:#3677a9">8</span>/8     Running     <span style="color:#3677a9">2</span>          16m
database-0                               <span style="color:#3677a9">2</span>/2     Running     <span style="color:#3677a9">0</span>          22m
database-seeder-25b239b49d162e7c-xhrmr   <span style="color:#3677a9">0</span>/2     Completed   <span style="color:#3677a9">0</span>          23m
diego-api-0                              <span style="color:#3677a9">9</span>/9     Running     <span style="color:#3677a9">2</span>          16m
diego-cell-0                             <span style="color:#3677a9">12</span>/12   Running     <span style="color:#3677a9">2</span>          16m
doppler-0                                <span style="color:#3677a9">6</span>/6     Running     <span style="color:#3677a9">0</span>          16m
log-api-0                                <span style="color:#3677a9">9</span>/9     Running     <span style="color:#3677a9">0</span>          16m
log-cache-0                              <span style="color:#3677a9">10</span>/10   Running     <span style="color:#3677a9">0</span>          16m
nats-0                                   <span style="color:#3677a9">7</span>/7     Running     <span style="color:#3677a9">0</span>          16m
router-0                                 <span style="color:#3677a9">7</span>/7     Running     <span style="color:#3677a9">0</span>          16m
routing-api-0                            <span style="color:#3677a9">6</span>/6     Running     <span style="color:#3677a9">0</span>          16m
scheduler-0                              <span style="color:#3677a9">13</span>/13   Running     <span style="color:#3677a9">1</span>          16m
singleton-blobstore-0                    <span style="color:#3677a9">8</span>/8     Running     <span style="color:#3677a9">0</span>          16m
tcp-router-0                             <span style="color:#3677a9">7</span>/7     Running     <span style="color:#3677a9">0</span>          16m
uaa-0                                    <span style="color:#3677a9">9</span>/9     Running     <span style="color:#3677a9">4</span>          16m</code></pre></div>
<p>In this default deployment, kubecf is launched without Ingress, and it
uses the Diego scheduler.</p>

<h3 id="tear-down-1">Tear-down</h3>
<div class="highlight"><pre style="color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">$ helm uninstall kubecf --namespace kubecf

release <span style="color:#ed9d13">&#34;kubecf&#34;</span> uninstalled</code></pre></div>
<h3 id="access">Access</h3>

<p>Run the following commands to access the cluster after the cf-operator and KubeCF has completed
sucessfully the deployment and all pods are up and running correctly</p>
<div class="highlight"><pre style="color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">cf api --skip-ssl-validation <span style="color:#ed9d13">&#34;https://api.&lt;domain&gt;&#34;</span></code></pre></div>
<p>Copy the admin cluster password.</p>
<div class="highlight"><pre style="color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">$ <span style="color:#40ffff">admin_pass</span>=<span style="color:#6ab825;font-weight:bold">$(</span>kubectl get secret <span style="color:#ed9d13">\
</span><span style="color:#ed9d13"></span>        --namespace kubecf var-cf-admin-password <span style="color:#ed9d13">\
</span><span style="color:#ed9d13"></span>        -o <span style="color:#40ffff">jsonpath</span>=<span style="color:#ed9d13">&#39;{.data.password}&#39;</span> <span style="color:#ed9d13">\
</span><span style="color:#ed9d13"></span>        | base64 --decode<span style="color:#6ab825;font-weight:bold">)</span></code></pre></div>
<p>Use the password from the previous step when requested.</p>
<div class="highlight"><pre style="color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">cf auth admin <span style="color:#ed9d13">&#34;</span><span style="color:#ed9d13">${</span><span style="color:#40ffff">admin_pass</span><span style="color:#ed9d13">}</span><span style="color:#ed9d13">&#34;</span></code></pre></div>
<p>See <a href="/docs/deployment/advanced-topics">Advanced Topics</a> for more configuration settings available in KubeCF.</p>

	
	
	<div class="text-muted mt-5 pt-3 border-top">Last modified October 9, 2020: <a  href="https://github.com/cloudfoundry-incubator/kubecf-docs/commit/353d9bf2a5e01ae713f8398347c5df95eeba11b0">Fixup after review (353d9bf)</a>
</div>
</div>


          </main>
        </div>
      </div>
      
<footer class="bg-dark py-5 row d-print-none">
  <div class="container-fluid mx-sm-5">
    <div class="row">
      <div class="col-6 col-sm-4 text-xs-center order-sm-2">
        
        
        
      </div>
      <div class="col-6 col-sm-4 text-right text-xs-center order-sm-3">
        
        
        
<ul class="list-inline mb-0">
  
  <li class="list-inline-item mx-2 h3" data-toggle="tooltip" data-placement="top" title="GitHub" aria-label="GitHub">
    <a class="text-white" target="_blank" rel="noopener noreferrer" href="https://github.com/cloudfoundry-incubator/kubecf">
      <i class="fab fa-github"></i>
    </a>
  </li>
  
  <li class="list-inline-item mx-2 h3" data-toggle="tooltip" data-placement="top" title="Slack" aria-label="Slack">
    <a class="text-white" target="_blank" rel="noopener noreferrer" href="https://cloudfoundry.slack.com/archives/CQ2U3L6DC">
      <i class="fab fa-slack"></i>
    </a>
  </li>
  
</ul>

        
        
      </div>
      <div class="col-12 col-sm-4 text-center py-2 order-sm-2">
        <small class="text-white">&copy; 2020 CloudFoundry.org Foundation, Inc. All Rights Reserved</small>
        <small class="ml-1"><a href="https://www.cloudfoundry.org/privacy-policy/" target="_blank">Privacy Policy</a></small>
	
		
	
      </div>
    </div>
  </div>
</footer>


    </div>
    
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js" integrity="sha384-ZMP7rVo3mIykV+2+9J3UJ46jBk0WLaUAdn689aCwoqbBJiSnjAK/l8WvCWPIPm49" crossorigin="anonymous"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js" integrity="sha384-ChfqqxuZUCnJSK3+MXmPNIyE6ZbWh2IMqE241rYiqJxyMiZ6OW/JmZQ5stwEULTy" crossorigin="anonymous"></script>













<script src="/js/main.min.460c8ae21829f9b330823a08f34ac961d7d0daa8874c8c9eba7ea0484bb42a79.js" integrity="sha256-RgyK4hgp&#43;bMwgjoI80rJYdfQ2qiHTIyeun6gSEu0Knk=" crossorigin="anonymous"></script>




  </body>
</html>